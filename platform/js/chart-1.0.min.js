;(function(c){var a=navigator.userAgent.toLowerCase(),b=Object.prototype.toString,e=/opera/.test(a),d=/\bchrome\b/.test(a),g=/webkit/.test(a),h=!d&&/safari/.test(a),j=!e&&/msie/.test(a),k=!!document.createElement("canvas").getContext,l=!g&&/gecko/.test(a),n=l&&/firefox/.test(a),r=/ipod|ipad|iphone|android/gi.test(a),m=/windows|win32/.test(a),s=/macintosh|mac os x/.test(a),f=/linux/.test(a),u={Linear:function(a,f,b,c){return b*a/c+f},Quad:{easeIn:function(a,f,b,c){return b*(a/=c)*a+f},easeOut:function(a,f,b,c){return-b*(a/=c)*(a-2)+f},easeInOut:function(a,f,b,c){return 1>(a/=c/2)?b/2*a*a+f:-b/2*(--a*(a-2)-1)+f}},Cubic:{easeIn:function(a,f,b,c){return b*(a/=c)*a*a+f},easeOut:function(a,f,b,c){return b*((a=a/c-1)*a*a+1)+f},easeInOut:function(a,f,b,c){return 1>(a/=c/2)?b/2*a*a*a+f:b/2*((a-=2)*a*a+2)+f}},Quart:{easeIn:function(a,f,b,c){return b*(a/=c)*a*a*a+f},easeOut:function(a,f,b,c){return-b*((a=a/c-1)*a*a*a-1)+f},easeInOut:function(a,f,b,c){return 1>(a/=c/2)?b/2*a*a*a*a+f:-b/2*((a-=2)*a*a*a-2)+f}},Bounce:{easeOut:function(a,f,b,c){return(a/=c)<1/2.75?b*7.5625*a*a+f:a<2/2.75?b*(7.5625*(a-=1.5/2.75)*a+0.75)+f:a<2.5/2.75?b*(7.5625*(a-=2.25/2.75)*a+0.9375)+f:b*(7.5625*(a-=2.625/2.75)*a+0.984375)+f}}},v=function(a){var c=!1,R=!1,M=[],N=function(){if(document.addEventListener)return function(){document.removeEventListener("DOMContentLoaded",N,!1);A()};if(document.attachEvent)return function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",N),A())}}(),S=function(){if(!c){try{document.documentElement.doScroll("left")}catch(a){setTimeout(S,1);return}A()}},A=function(){if(!c){c=!0;for(var a=0;a<M.length;a++)M[a].call(document);M=[]}},K=function(){if(!R){R=!0;if("complete"===document.readyState)return setTimeout(A,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",N,!1),a.addEventListener("load",A,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",N);a.attachEvent("onload",A);var f=!1;try{f=null==a.frameElement}catch(b){}document.documentElement.doScroll&&f&&S()}}},L=function(a){K();c?a.call(document,o):M.push(function(){return a.call(this)})},o=function(a){if(!a||a.nodeType)return a;if("string"===typeof a)return-1!=a.indexOf("#")&&(a=a.substring(1)),document.getElementById(a);"function"===typeof a&&L(a)};o.apply=function(a,f){if(a&&f&&"object"==typeof f)for(var b in f)"undefined"!=typeof f[b]&&(a[b]=f[b]);if(!f&&a){var c={};for(b in a)c[b]=a[b];return c}return a};o.applyIf=function(a,f){if(a&&f&&"object"==typeof f)for(var b in f)"undefined"!=typeof f[b]&&"undefined"==typeof a[b]&&(a[b]=f[b]);return!f&&a?o.apply(a):a};o.merge=function(a,f,c){if(a&&f&&"object"==typeof f){for(var e in f)"undefined"!=typeof f[e]&&("[object Object]"===b.apply(f[e])?"[object Object]"===b.apply(a[e])?o.merge(a[e],f[e]):a[e]=o.clone(f[e],!0):a[e]=f[e]);if("object"==typeof c)return o.merge(a,c)}return a};o.clone=function(a,f,c){var e={};if("[object Array]"===b.apply(a)&&"[object Object]"===b.apply(f))for(var d=0;d<a.length;d++)e[a[d]]=c&&"[object Object]"===b.apply(f[a[d]])?o.clone(f[a[d]]):f[a[d]];else if("[object Object]"===b.apply(a))for(d in a)e[d]=f&&"[object Object]"===b.apply(a[d])&&!(a[d]instanceof o.Painter)?o.clone(a[d],f):a[d];return e};o.override=function(a,f){if(f){var b=a.prototype;o.apply(b,f);o.isIE&&f.hasOwnProperty("toString")&&(b.toString=f.toString)}};o.extend=function(){var a=function(a){for(var f in a)this[f]=a[f]},f=Object.prototype.constructor;return function(b,c){var e=function(){b.apply(this,arguments)},d=function(){},g=b.prototype;d.prototype=g;d=e.prototype=new d;d.constructor=e;e.superclass=g;g.constructor==f&&(g.constructor=b);e.override=function(a){o.override(e,a)};d.superclass=d.supr=function(){return g};d.override=a;o.override(e,c);e.extend=function(a){return o.extend(e,a)};return e}}();var E=Math.sin,B=Math.cos,C=Math.atan,H=Math.sqrt,O=Math.abs,F=Math.PI,I=2*F,J=Math.ceil,P=Math.round,Z=Math.floor,T=Math.max,U=Math.min,D=parseFloat,V=function(a,f){if(0==a)return a;f=f||5;return 0==parseInt(a)?D((a/f+"").substring(0,(a+"").length+1)):Math.ceil(a/f)},$="navy,olive,silver,gold,lime,fuchsia,aqua,green,red,blue,pink,purple,yellow,maroon,black,gray,white".split(","),W={navy:"rgb(0,0,128)",olive:"rgb(128,128,0)",orange:"rgb(255,165,0)",silver:"rgb(192,192,192)",white:"rgb(255,255,255)",gold:"rgb(255,215,0)",lime:"rgb(0,255,0)",fuchsia:"rgb(255,0,255)",aqua:"rgb(0,255,255)",green:"rgb(0,128,0)",gray:"rgb(80,80,80)",red:"rgb(255,0,0)",blue:"rgb(0,0,255)",pink:"rgb(255,192,203)",purple:"rgb(128,0,128)",yellow:"rgb(255,255,0)",maroon:"rgb(128,0,0)",black:"rgb(0,0,0)",azure:"rgb(240,255,255)",beige:"rgb(245,245,220)",brown:"rgb(165,42,42)",cyan:"rgb(0,255,255)",darkblue:"rgb(0,0,139)",darkcyan:"rgb(0,139,139)",darkgrey:"rgb(169,169,169)",darkgreen:"rgb(0,100,0)",darkkhaki:"rgb(189,183,107)",darkmagenta:"rgb(139,0,139)",darkolivegreen:"rgb(85,107,47)",darkorange:"rgb(255,140,0)",darkorchid:"rgb(153,50,204)",darkred:"rgb(139,0,0)",darksalmon:"rgb(233,150,122)",darkviolet:"rgb(148,0,211)",indigo:"rgb(75,0,130)",khaki:"rgb(240,230,140)",lightblue:"rgb(173,216,230)",lightcyan:"rgb(224,255,255)",lightgreen:"rgb(144,238,144)",lightgrey:"rgb(211,211,211)",lightpink:"rgb(255,182,193)",lightyellow:"rgb(255,255,224)",magenta:"rgb(255,0,255)",violet:"rgb(128,0,128)"},aa=function(a){a=a.replace(/\s/g,"").toLowerCase();if(/rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)/.exec(a)||/rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0(\.[0-9])?|1(\.0)?)\)/.exec(a))return a;if(/#(([a-fA-F0-9]{6})|([a-fA-F0-9]{3}))/.exec(a))return a=a.replace(/#/g,"").replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"),"rgb("+parseInt(a.substring(0,2),16)+","+parseInt(a.substring(2,4),16)+","+parseInt(a.substring(4,6),16)+")";if(W[a])return W[a];throw Error("invalid colors value '"+a+"'");},X=function(a,f){f=f||0.14;return 0.5<a?f-(1-a)/10:0.1<a?f-0.16+a/5:a>f?f:a/2},Y=function(a,f,b,c){var f=aa(f),e=/rgb\((\w*),(\w*),(\w*)\)/.exec(f);if(e)f=[e[1],e[2],e[3]];else if(e=/rgba\((\w*),(\w*),(\w*),(.*)\)/.exec(f))f=[e[1],e[2],e[3],e[4]];else throw Error("invalid colors value '"+f+"'");var d;var e=f,g=void 0,G=void 0;o.isArray(e)&&(g=e[1],G=e[2],e=e[0]);var e=e/255,g=g/255,G=G/255,h=T(T(e,g),G),u=U(U(e,g),G),u=h-u;0==u?d=[0,0,h]:(e==h?d=(g-G)/u:g==h?d=(G-e)/u+2:G==h&&(d=(e-g)/u+4),d*=60,0>d&&(d+=360),d=[d,u/h,h]);d[1]-=c||0;a?(d[2]-=X(d[2],b),d[1]=o.upTo(d[1],1),d[2]=o.lowTo(d[2],0)):(d[2]+=X(1-d[2],b),d[1]=o.lowTo(d[1],0),d[2]=o.upTo(d[2],1));a=d;b=f[3];f=c=void 0;o.isArray(a)&&(f=b,b=a[1],c=a[2],a=a[0]);var z,v,j;d=Z(a/60)%6;a=a/60-d;p=c*(1-b);q=c*(1-b*a);t=c*(1-b*(1-a));switch(d){case 0:z=c;v=t;j=p;break;case 1:z=q;v=c;j=p;break;case 2:z=p;v=c;j=t;break;case 3:z=p;v=q;j=c;break;case 4:z=t;v=p;j=c;break;case 5:z=c,v=p,j=q}return"rgb"+(f?"a":"")+"("+P(255*z)+","+P(255*v)+","+P(255*j)+(f?","+f+")":")")};o.apply(o,{version:"1.0",email:"wanghetommy@gmail.com",isEmpty:function(a,f){return null===a||void 0===a||o.isArray(a)&&!a.length||(!f?""===a:!1)},isArray:function(a){return"[object Array]"===b.apply(a)},isDate:function(a){return"[object Date]"===b.apply(a)},isObject:function(a){return!!a&&"[object Object]"===b.apply(a)},isFunction:function(a){return"[object Function]"===b.apply(a)},isNumber:function(a){return"number"===typeof a&&isFinite(a)},isString:function(a){return"string"===typeof a},isBoolean:function(a){return"boolean"===typeof a},isFalse:function(a){return"boolean"===typeof a&&!a},isElement:function(a){return a?!!a.tagName:!1},isDefined:function(a){return"undefined"!==typeof a},getFont:function(a,f,b){return a+" "+f+"px "+b},getDoc:function(){return a.contentWindow?a.contentWindow.document:a.contentDocument?a.contentDocument:a.document},DefineAbstract:function(a,f){if(!f[a])throw Error("Cannot instantiate the type '"+f.type+"'.you must implements it with method '"+a+"'.");},getAnimationArithmetic:function(a){return"linear"==a?u.Linear:"bounce"==a?u.Bounce.easeOut:"easeInOut"==a||"easeIn"==a||"easeOut"==a?u[o.DefaultAnimationArithmetic][a]:u.Linear},noConflict:function(){return v},parsePadding:function(a,f){if(o.isNumber(a))return[a,a,a,a];if(o.isArray(a))return a;f=f||0;a=a.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g,/\s/).replace(/\s/g,",").split(",");1==a.length?a[0]=a[1]=a[2]=a[3]=D(a[0])||f:2==a.length?(a[0]=a[2]=D(a[0])||f,a[1]=a[3]=D(a[1])||f):3==a.length?(a[0]=D(a[0])||f,a[1]=a[3]=D(a[1])||f,a[2]=D(a[2])||f):(a[0]=D(a[0])||f,a[1]=D(a[1])||f,a[2]=D(a[2])||f,a[3]=D(a[3])||f);return a},distanceP2P:function(a,f,b,c){return H((b-a)*(b-a)+(c-f)*(c-f))},atan2Radian:function(a,f,b,c){if(a==b)return c>f?F/2:3*F/2;var e=o.quadrant(a,f,b,c),a=C(O((f-c)/(a-b)));1==e?a=F-a:2==e?a=F+a:3==e&&(a=I-a);return a},angle2Radian:function(a){return a*F/180},radian2Angle:function(a){return 180*a/F},quadrant:function(a,f,b,c){return a<b?f<c?3:0:f<c?2:1},quadrantd:function(a){return J(2*(a%(2*F))/F)},upTo:function(a,f){return f>a?a:f},lowTo:function(a,f){return f<a?a:f},between:function(a,f,b){return b>f?f:b<a?a:b},inRange:function(a,f,b){return f>b&&a<b},angleInRange:function(a,f,b){a%=I;f%=I;return f>a?f>b&&a<b:f<a?b<f||b>a:b==f},inRangeClosed:function(a,f,b){return f>=b&&a<=b},inEllipse:function(a,f,b,c){return 1>=a*a/b/b+f*f/c/c},p2Point:function(a,f,b,c){return{x:a+B(b)*c,y:f+E(b)*c}},vectorP2P:function(a,f,b){b||(f=o.angle2Radian(f),a=o.angle2Radian(a));f=E(f);return{x:f*E(a),y:f*B(a)}},iGather:function(a){return(a||"ichartjs")+"-"+(new Date).getTime().toString()},toPercent:function(a,f){return(100*a).toFixed(f)+"%"},parseFloat:function(a,f){if(!o.isNumber(a)&&(a=D(a),!o.isNumber(a)))throw Error("'"+f+"'is not a valid number.");return a},ceil:function(a,f){return a+V(a,f)},floor:function(a,f){return a-V(a,f)},get:function(a){return $[a%16]},_2D:"2d",_3D:"3d",light:function(a,f,b){return Y(!1,a,f,b)},dark:function(a,f,b){return Y(!0,a,f,b)},fixPixel:function(a){return o.isNumber(a)?a:D(a.replace("px",""))||0},toPixel:function(a){return o.isNumber(a)?a+"px":o.fixPixel(a)+"px"},emptyFn:function(){return!0},supportCanvas:k,isOpera:e,isWebKit:g,isChrome:d,isSafari:h,isIE:j,isGecko:l,isFF:n,isLinux:f,isMobile:r,isWindows:m,isMac:s,FRAME:r?24:54,DefaultAnimationArithmetic:"Cubic"});o.Assert={gtZero:function(a,f){o.Assert.gt(a,0,f)},gt:function(a,f,b){if(!o.isNumber(a)&&a>=f)throw Error(b+" required Number gt "+f+",given:"+a);},isNumber:function(a,f){if(!o.isNumber(a))throw Error(f+" required Number,given:"+a);},isNotEmpty:function(a,f){if(!a||""==a)throw Error(" required not empty.cause:"+f);if(o.isArray(a)&&0==a.length)throw Error("required must has one element at least.cause:"+f);},isArray:function(a,f){if(!o.isArray(a))throw Error(f+" required Array,given:"+a);},isFunction:function(a,f){if(!o.isFunction(a))throw Error(f+" required Function,given:"+a);},isTrue:function(a,f){if(!0!==a)throw Error(f);},equal:function(a,f,b){if(a!==f)throw Error(b);}};a.requestAnimFrame=function(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(f){a.setTimeout(f,1E3/60)}}();o.Event={addEvent:function(a,f,b,c){a.addEventListener?a.addEventListener(f,b,c):a.attachEvent?a.attachEvent("on"+f,b):a["on"+f]=b},fix:function(f){"undefined"==typeof f&&(f=a.event);f.target||(f.target=f.srcElement||document);!f.relatedTarget&&f.fromElement&&(f.relatedTarget=f.fromElement===f.target?f.toElement:f.fromElement);if(null==f.pageX&&null!=f.clientX){var b=document.documentElement,c=document.body;f.pageX=f.clientX+(b&&b.scrollLeft||c&&c.scrollLeft||0)-(b&&b.clientLeft||c&&c.clientLeft||0);f.pageY=f.clientY+(b&&b.scrollTop||c&&c.scrollTop||0)-(b&&b.clientTop||c&&c.clientTop||0)}if("undefined"==typeof f.offsetX&&"undefined"==typeof f.offsetY&&"number"!=typeof f.offsetX){for(var c=b=0,e=f.target;e!=document.body&&e;)b+=e.offsetLeft,c+=e.offsetTop,e=e.offsetParent;f.offsetX=f.pageX-b;f.offsetY=f.pageY-c}if(null==f.which&&(null!=f.charCode||null!=f.keyCode))f.which=null!=f.charCode?f.charCode:f.keyCode;!f.metaKey&&f.ctrlKey&&(f.metaKey=f.ctrlKey);!f.which&&void 0!==f.button&&(f.which=f.button&1?1:f.button&2?3:f.button&4?2:0);f.stopPropagation||(f.stopPropagation=function(){a.event.cancelBubble=true});return f}};return o}(c);Array.prototype.each=function(a,f){for(var b=this.length,c,e=0;e<b&&!(c=f?a.call(f,this[e],e):a(this[e],e),"boolean"===typeof c&&!c);e++);};Array.prototype.eachAll=function(a,f){this.each(function(b,c){v.isArray(b)?b.eachAll(a,f):f?a.call(f,b,c):a(b,c)},f)};c.iChart=v;c.$||(c.$=c.iChart)})(window);(function(c){c.Element=function(a){this.type="element";c.DefineAbstract("configure",this);c.DefineAbstract("afterConfiguration",this);this.options={};this.set({id:"",fontsize:12,font:"Verdana",fontweight:"normal",border:{enable:!1,color:"#BCBCBC",style:"solid",width:1,radius:0},shadow:!1,shadow_color:"#666666",shadow_blur:4,shadow_offsetx:0,shadow_offsety:0});this.variable={};this.events={};this.initialization=this.preventEvent=!1;this.configure.apply(this,Array.prototype.slice.call(arguments,1));this.set(a);this.afterConfiguration()};c.Element.prototype={set:function(a){c.isObject(a)&&c.merge(this.options,a)},pushIf:function(a,b){return!this.get(a)?this.push(a,b):this.get(a)},push:function(a,b){var c=a.split("."),d=this.options;for(i=0;i<c.length-1;i++)d[c[i]]||(d[c[i]]={}),d=d[c[i]];return d[c[c.length-1]]=b},get:function(a){var a=a.split("."),b=this.options[a[0]];for(i=1;i<a.length;i++){if(!b)return null;b=b[a[i]]}return b}};c.Painter=c.extend(c.Element,{configure:function(){this.type="painter";this.dimension=c._2D;c.DefineAbstract("commonDraw",this);c.DefineAbstract("initialize",this);this.set({brushsize:1,strokeStyle:"gray",padding:10,color:"black",offsetx:0,offsety:0,background_color:"#FEFEFE",color_factor:0.15,gradient:!1,style:"",border:{enable:!0},listeners:null,originx:0,originy:0});this.variable.event={mouseover:!1};this.registerEvent("initialize","click","dblclick","mousemove","mouseover","mouseout","beforedraw","draw")},afterConfiguration:function(){},registerEvent:function(){for(var a=0;a<arguments.length;a++)this.events[arguments[a]]=[]},init:function(){if(!this.initialization){if(c.isObject(this.get("listeners")))for(var a in this.get("listeners"))this.on(a,this.get("listeners")[a]);this.initialize();this.fireEvent(this,"initialize",[this])}},is3D:function(){return this.dimension==c._3D},draw:function(a){this.init();this.draw=function(a){if(!this.fireEvent(this,"beforedraw",[this]))return this;this.commonDraw(a);this.fireEvent(this,"draw",[this])};this.draw(a)},fireString:function(a,b,e,d){a=this.fireEvent(a,b,e);return c.isString(a)?a:d},fireEvent:function(a,b,c){var d=this.events[b].length;if(1==d)return this.events[b][0].apply(a,c);for(var g=!0,h=0;h<d;h++)g=this.events[b][h].apply(a,c);return g},on:function(a,b){c.isString(a)&&c.isFunction(b)&&(this.events[a]||console.log(a));this.events[a].push(b);return this},doConfig:function(){var a=c.parsePadding(this.get("padding")),b=this.get("border.enable"),b=b?c.parsePadding(this.get("border.width")):[0,0,0,0],e=this.get("background_color"),d=this.get("color_factor");this.push("padding_top",a[0]+b[0]);this.push("padding_right",a[1]+b[1]);this.push("padding_bottom",a[2]+b[2]);this.push("padding_left",a[3]+b[3]);this.push("hpadding",a[1]+a[3]+b[1]+b[3]);this.push("vpadding",a[0]+a[2]+b[0]+b[2]);this.push("fontStyle",c.getFont(this.get("fontweight"),this.get("fontsize"),this.get("font")));this.push("f_color",e);this.push("light_color",c.light(e,d));this.push("dark_color",c.dark(e,d));this.push("light_color2",c.light(e,2*d));this.push("dark_color2",2*c.dark(e,d));this.id=this.get("id")}});c.Html=c.extend(c.Element,{configure:function(a){this.type="html";this.T=a;c.DefineAbstract("beforeshow",this);this.set({animation:!0,width:0,height:0,style:"",index:999,offset_top:0,offset_left:0});this.transitions=""},afterConfiguration:function(){this.initialize()},initialize:function(){this.wrap=this.get("wrap");this.dom=document.createElement("div");this.get("shadow")&&this.css("boxShadow",this.get("shadow_offsetx")+"px "+this.get("shadow_offsety")+"px "+this.get("shadow_blur")+"px "+this.get("shadow_color"));this.get("border.enable")&&(this.css("border",this.get("border.width")+"px "+this.get("border.style")+" "+this.get("border.color")),this.css("borderRadius",this.get("border.radius")+"px"));this.css("zIndex",this.get("index"));this.applyStyle()},width:function(){return this.dom.offsetWidth},height:function(){return this.dom.offsetHeight},onTransitionEnd:function(a,b){var e="transitionend";c.isWebKit?e="webkitTransitionEnd":c.isOpera&&(e="oTransitionEnd");c.Event.addEvent(this.dom,e,a,b)},transition:function(a){this.transitions=""==this.transitions?a:this.transitions+","+a;c.isWebKit?this.css("WebkitTransition",this.transitions):c.isGecko?this.css("MozTransition",this.transitions):c.isOpera?this.css("OTransition",this.transitions):this.css("transition",this.transitions)},show:function(a,b){this.beforeshow(a,b);this.css("visibility","visible")},hidden:function(){this.css("visibility","hidden")},getDom:function(){return this.dom},css:function(a,b){if(c.isString(a))if(c.isDefined(b))this.dom.style[a]=b;else return this.dom.style[a]},applyStyle:function(){for(var a=this.get("style").split(";"),b,c=0;c<a.length;c++)b=a[c].split(":"),1<b.length&&this.css(b[0],b[1])}});c.Component=c.extend(c.Painter,{configure:function(a){c.Component.superclass.configure.apply(this,arguments);this.type="component";this.set({tip:{enable:!1,border:{width:2}}});this.proxy=this.atomic=!1;this.inject(a);this.final_parameter={}},afterConfiguration:function(){this.init()},initialize:function(){this.preventEvent||c.DefineAbstract("isEventValid",this);c.DefineAbstract("doDraw",this);this.doConfig();this.initialization=!0},doConfig:function(){c.Component.superclass.doConfig.call(this);this.x=this.get("originx")+this.get("offsetx");this.y=this.get("originy")+this.get("offsety");this.data=this.get("data");c.Interface._3D.call(this);this.get("tip.enable")&&(this.pushIf("tip.border.color",this.get("background_color")),c.isFunction(this.get("tip.invokeOffset"))||this.push("tip.invokeOffset",this.tipInvoke()))},isMouseOver:function(a){return this.isEventValid(a)},redraw:function(){this.container.draw()},commonDraw:function(a){this.proxy||this.doDraw.call(this,a)},inject:function(a){a&&(this.container=a,this.target=this.T=a.T)}});c.Interface=function(){var a=function(a){return c.isNumber(a)?a:c.parseFloat(a,a)},b=function(b,e){var h=0,j=0,k,l=0;b.each(function(b,e){c.merge(b,this.fireEvent(this,"parseData",[this,b,e]));b.color=b.color||c.get(e);j=b.value;if(c.isArray(j)){var d=0;l=j.length>l?j.length:l;for(var g=0;g<j.length;g++)j[g]=a(j[g]),d+=j[g],k||(k=j),h=j[g]>h?j[g]:h,k=j[g]<k?j[g]:k;b.total=d}else j=a(j),b.value=j,this.total+=j,h=j>h?j:h,k||(k=j),k=j<k?j:k},this);c.isNumber(e)?Array.prototype.splice.apply(this.data,[e,0].concat(b)):this.data=this.data.concat(b);this.get("minValue")&&(k=this.get("minValue")<k?this.get("minValue"):k);this.get("maxValue")&&(h=this.get("maxValue")<h?this.get("maxValue"):h);c.isArray(this.get("data_labels"))&&(l=this.get("data_labels").length>l?this.get("data_labels").length:l);this.push("maxItemSize",l);this.push("minValue",k);this.push("maxValue",h);this.push("total",this.total);return b},e=function(b){this.data_labels=this.get("data_labels");var e=0,h=0,j,k=this.data_labels.length;this.data=this.data.concat(b);this.data.each(function(a,b){c.merge(a,this.fireEvent(this,"parseData",[this,a,b,this.data_labels]));c.Assert.equal(a.value.length,k,this.type+":data length and data_labels not corresponding.")},this);for(var l=0;l<k;l++){for(var n=[],r=0;r<this.data.length;r++)j=this.data[r],b=j.value[l],b=a(b,b),j.value[l]=b,j.color||(j.color=c.get(r)),this.total+=b,e=b>e?b:e,h=b<h?b:h,n.push({name:j.name,value:j.value[l],color:j.color});this.columns.push({name:this.data_labels[l],item:n})}this.push("minValue",h);this.push("maxValue",e);this.push("total",this.total)};return{parser:function(a,c){if("simple"==this.dataType)return b.call(this,[].concat(a),c);"complex"==this.dataType&&e.call(this,[].concat(a),c)},_3D:function(){if(this.is3D()&&!this.get("xAngle_")){var a=c.vectorP2P(this.get("xAngle"),this.get("yAngle"));this.push("xAngle_",a.x);this.push("yAngle_",a.y)}},_2D:function(){},coordinate_:function(){if(this.dimension==c._2D)return new c.Coordinate2D(c.apply({scale:{position:this.get("scaleAlign"),max_scale:this.get("maxValue"),min_scale:this.get("minValue")}},this.get("coordinate")),this);this.push("coordinate.xAngle_",this.get("xAngle_"));this.push("coordinate.yAngle_",this.get("yAngle_"));this.push("coordinate.zHeight",this.get("zHeight")*this.get("bottom_scale"));return new c.Coordinate3D(c.apply({scale:{position:this.get("scaleAlign"),scaleAlign:this.get("scaleAlign"),max_scale:this.get("maxValue"),min_scale:this.get("minValue")}},this.get("coordinate")),this)},coordinate:function(){var a=this.pushIf("coordinate.width",0.9*this.get("client_width")),b=this.pushIf("coordinate.height",0.9*this.get("client_height"));this.get("coordinate.height")>this.get("client_height")&&(b=this.push("coordinate.height",0.9*this.get("client_height")));this.get("coordinate.width")>this.get("client_width")&&(a=this.push("coordinate.width",0.9*this.get("client_width")));"left"==this.get("align")?this.push("originx",this.get("l_originx")):"right"==this.get("align")?this.push("originx",this.get("r_originx")-a):this.push("originx",this.get("centerx")-a/2);this.push("originx",this.get("originx")+this.get("offsetx"));this.push("originy",this.get("centery")-b/2+this.get("offsety"));(!this.get("coordinate.valid_width")||this.get("coordinate.valid_width")>a)&&this.push("coordinate.valid_width",a);(!this.get("coordinate.valid_height")||this.get("coordinate.valid_height")>b)&&this.push("coordinate.valid_height",b);this.x=this.get("originx");this.y=this.get("originy");this.push("coordinate.originx",this.x);this.push("coordinate.originy",this.y)}}}();c.Tip=c.extend(c.Html,{configure:function(){c.Tip.superclass.configure.apply(this,arguments);this.type="tip";this.set({text:"",showType:"follow",invokeOffset:null,fade_duration:300,move_duration:100,invokeOffsetDynamic:!1,style:"textAlign:left;padding:4px 5px;cursor:pointer;backgroundColor:rgba(239,239,239,.85);fontSize:12px;color:black;",border:{enable:!0},delay:200})},follow:function(a,b){var e=this.dom.style;if(this.get("invokeOffsetDynamic")){if(b.hit){if(c.isString(b.text)||c.isNumber(b.text))this.dom.innerHTML=b.text;var d=this.get("invokeOffset")(this.width(),this.height(),b);e.top=d.top+"px";e.left=d.left+"px"}}else"follow"==this.get("showType")?(e.top=a.offsetY-1.1*this.height()-2+"px",e.left=a.offsetX+2+"px"):c.isFunction(this.get("invokeOffset"))?(d=this.get("invokeOffset")(this.width(),this.height(),b),e.top=d.top+"px",e.left=d.left+"px"):(e.top=a.offsetY-1.1*this.height()-2+"px",e.left=a.offsetX+2+"px")},text:function(a){this.dom.innerHTML=a},beforeshow:function(a,b){this.follow(a,b)},show:function(a,b){this.beforeshow(a,b);this.css("visibility","visible");this.get("animation")&&this.css("opacity",1)},hidden:function(){this.get("animation")?this.css("opacity",0):this.css("visibility","hidden")},initialize:function(){c.Tip.superclass.initialize.call(this);var a=this;a.css("position","absolute");a.dom.innerHTML=a.get("text");a.hidden();if(a.get("animation")){var b=a.get("move_duration")/1E3+"s ease-in 0s";a.transition("opacity "+a.get("fade_duration")/1E3+"s ease-in 0s");a.transition("top "+b);a.transition("left "+b);a.onTransitionEnd(function(){0==a.css("opacity")&&a.css("visibility","hidden")},!1)}a.wrap.appendChild(a.dom);a.T.on("mouseover",function(b,c){a.show(b,c)}).on("mouseout",function(b){a.hidden(b)});if("follow"==a.get("showType"))a.T.on("mousemove",function(b,c){a.T.variable.event.mouseover&&setTimeout(function(){a.T.variable.event.mouseover&&a.follow(b,c)},a.get("delay"))})}});c.CrossHair=c.extend(c.Html,{configure:function(){c.CrossHair.superclass.configure.apply(this,arguments);this.type="crosshair";this.set({yAngle_:void 0,top:0,left:0,hcross:!0,vcross:!0,invokeOffset:null,line_width:1,line_color:"#1A1A1A",delay:200})},follow:function(a,b){if(this.get("invokeOffset")){var c=this.get("invokeOffset")(a,b);c&&c.hit&&(this.horizontal.style.top=c.top-this.top+"px",this.vertical.style.left=c.left-this.left+"px")}else this.horizontal.style.top=a.offsetY-this.top-1+"px",this.vertical.style.left=a.offsetX-this.left-1+"px"},beforeshow:function(a,b){this.follow(a,b)},initialize:function(){c.CrossHair.superclass.initialize.call(this);var a=this;a.top=c.fixPixel(a.get("top"));a.left=c.fixPixel(a.get("left"));a.dom=document.createElement("div");a.dom.style.zIndex=a.get("index");a.dom.style.position="absolute";a.dom.style.width=c.toPixel(0);a.dom.style.height=c.toPixel(0);a.dom.style.top=c.toPixel(a.get("top"));a.dom.style.left=c.toPixel(a.get("left"));a.css("visibility","hidden");a.horizontal=document.createElement("div");a.vertical=document.createElement("div");a.horizontal.style.width=c.toPixel(a.get("width"));a.horizontal.style.height=c.toPixel(a.get("line_width"));a.horizontal.style.backgroundColor=a.get("line_color");a.horizontal.style.position="absolute";a.vertical.style.width=c.toPixel(a.get("line_width"));a.vertical.style.height=c.toPixel(a.get("height"));a.vertical.style.backgroundColor=a.get("line_color");a.vertical.style.position="absolute";a.dom.appendChild(a.horizontal);a.dom.appendChild(a.vertical);a.get("shadow")&&(a.dom.style.boxShadow=a.get("shadowStyle"));a.wrap.appendChild(a.dom);a.T.on("mouseover",function(b,c){a.show(b,c)}).on("mouseout",function(b,c){a.hidden(b,c)}).on("mousemove",function(b,c){a.follow(b,c)})}});c.Legend=c.extend(c.Component,{configure:function(){c.Legend.superclass.configure.apply(this,arguments);this.type="legend";this.set({data:void 0,width:"auto",column:1,row:"max",maxwidth:0,line_height:16,sign:"square",sign_size:12,sign_space:5,legend_space:5,text_with_sign_color:!1,align:"right",valign:"middle"});this.atomic=!0;this.registerEvent("parse","drawRaw","drawCell")},drawCell:function(a,b,c,d){var g=this.get("sign_size"),h=this.get("sign");"round"==h?this.T.round(a+g/2,b+g/2,g/2,d):"round-bar"==h?(this.T.rectangle(a,b+5*g/12,g,g/6,d),this.T.round(a+g/2,b+g/2,g/4,d)):"square-bar"==h?(this.T.rectangle(a,b+5*g/12,g,g/6,d),this.T.rectangle(a+g/4,b+g/4,g/2,g/2,d)):this.T.rectangle(a,b,g,g,d);h=this.get("color");this.get("text_with_sign_color")&&(h=d);this.T.fillText(c,a+this.get("signwidth"),b+g/2,this.get("textwidth"),h);this.fireEvent(this,"drawCell",[this])},drawRow:function(a,b,c){for(var d,g=0;g<this.get("column");g++)d=this.data[a],a<this.data.length&&(this.fireEvent(this,"drawCell",[d]),this.drawCell(b,c,d.text,d.color),d.x=b,d.y=c),b+=this.columnwidth[g]+this.get("signwidth")+this.get("legend_space"),a++},isEventValid:function(a){var b={valid:!1};a.offsetX>this.x&&a.offsetX<this.x+this.width&&a.offsetY>this.y&&a.offsetY<this.y+this.height&&this.data.each(function(c,d){a.offsetX>c.x&&a.offsetX<c.x+c.width+this.get("signwidth")&&a.offsetY>c.y&&a.offsetY<c.y+this.get("line_height")&&(b={valid:!0,index:d,target:c})},this);return b},doDraw:function(){this.get("border.enable")&&this.T.drawBox(this.x,this.y,this.width,this.height,this.get("border.width"),this.get("border.color"),this.get("border.radius"),this.get("f_color"),!1,this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"));this.T.textStyle("left","middle",c.getFont(this.get("fontweight"),this.get("fontsize"),this.get("font")));for(var a=this.x+this.get("padding_left"),b=this.y+this.get("padding_top"),e=this.get("column"),d=this.get("row"),g=0;g<d;g++)this.drawRow(g*e,a,b),b+=this.get("line_height"),this.fireEvent(this,"drawRaw",[this,g*e])},calculate:function(a,b){this.data=a;var e=0,d=w=this.get("width"),g=0,h="auto"==w,j=c.isNumber(this.get("column")),k=c.isNumber(this.get("row")),l=this.data.length,n=this.container;!j&&!k&&(j=1);j&&!k&&this.push("row",Math.ceil(l/this.get("column")));!j&&k&&this.push("column",Math.ceil(l/this.get("row")));j=this.get("column");k=this.get("row");l>k*j&&(k+=Math.ceil((l-k*j)/j),this.push("row",k));this.columnwidth=Array(j);h&&(d=0);b.each(function(a,b){c.merge(a,this.fireEvent(this,"parse",[this,a.name,b]));a.text=a.text||a.name;a.width=this.T.measureText(a.text)},this);for(var r=0;r<j;r++){g=0;for(e=r;e<l;)g=Math.max(g,this.data[e].width),e+=j;this.columnwidth[r]=g;d+=g}h&&(w=this.push("width",d+this.get("hpadding")+this.get("signwidth")*j+(j-1)*this.get("legend_space")));w>this.get("maxwidth")&&(w=this.push("width",this.get("maxwidth")));this.push("textwidth",w-this.get("hpadding")-this.get("signwidth"));this.width=w;this.height=e=this.push("height",k*this.get("line_height")+this.get("vpadding"));this.y="top"==this.get("valign")?n.get("t_originy"):"bottom"==this.get("valign")?n.get("b_originy")-e:n.get("centery")-e/2;this.x="left"==this.get("align")?n.get("l_originx"):"center"==this.get("align")?n.get("centerx")-this.get("textwidth")/2:n.get("r_originx")-w;this.x=this.push("originx",this.x+this.get("offsetx"));this.y=this.push("originy",this.y+this.get("offsety"))},doConfig:function(){c.Legend.superclass.doConfig.call(this);c.Assert.isNotEmpty(this.get("data"),this.type+"[data]");var a=this.get("sign_size"),b=this.container;this.T.textFont(this.get("fontStyle"));this.push("signwidth",a+this.get("sign_space"));this.get("line_height")<a&&this.push("line_height",a+a/5);"center"==this.get("align")&&"middle"==this.get("valign")&&this.push("valign","top");"left"==b.get("align")&&"middle"==this.get("valign")&&this.push("align","right");this.calculate(this.data,this.data)}});c.Label=c.extend(c.Component,{configure:function(){c.Label.superclass.configure.apply(this,arguments);this.type="legend";this.set({text:"",line_height:12,line_thickness:1,sign:"square",sign_size:12,padding:"2 5",offsety:2,sign_space:5,background_color:"#efefef",text_with_sign_color:!1});this.atomic=!0;this.registerEvent()},isEventValid:function(a){return{valid:c.inRange(this.labelx,this.labelx+this.get("width"),a.offsetX)&&c.inRange(this.labely,this.labely+this.get("height"),a.offsetY)}},text:function(a){a&&this.push("text",a);this.push("width",this.T.measureText(this.get("text"))+this.get("hpadding")+this.get("sign_size")+this.get("sign_space"))},localizer:function(){var a=this.get("quadrantd");this.labelx=2<=a&&3>=a?this.get("labelx")-this.get("width"):this.get("labelx");this.labely=3<=a?this.get("labely")-this.get("height"):this.get("labely")},doDraw:function(){this.localizer();var a=this.get("line_potins"),b=this.get("sign_size"),c=this.labelx+this.get("padding_left"),d=this.labely+this.get("padding_top");this.T.lines(a,this.get("line_thickness"),this.get("border.color"),this.get("line_globalComposite"));this.get("border.enable")&&this.T.drawBox(this.labelx,this.labely,this.get("width"),this.get("height"),this.get("border.width"),this.get("border.color"),this.get("border.radius"),this.get("f_color"),!1,this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"));this.T.textStyle("left","top",this.get("fontStyle"));a=this.get("color");this.get("text_with_sign_color")&&(a=this.get("scolor"));"square"==this.get("sign")?this.T.rectangle(c,d,b,b,this.get("scolor")):this.T.round(c+b/2,d+b/2,b/2,this.get("scolor"));this.T.fillText(this.get("text"),c+b+this.get("sign_space"),d,this.get("textwidth"),a)},doConfig:function(){c.Label.superclass.doConfig.call(this);this.T.textFont(c.getFont(this.get("fontweight"),this.get("fontsize"),this.get("font")));this.get("fontsize")>this.get("line_height")&&this.push("line_height",this.get("fontsize"));this.push("height",this.get("line_height")+this.get("vpadding"));this.text();this.localizer()}});c.Text=c.extend(c.Component,{configure:function(){c.Text.superclass.configure.apply(this,arguments);this.type="text";this.set({text:"",textAlign:"center",textBaseline:"top",width:0,height:0,writingmode:"lr",line_height:16});this.registerEvent();this.preventEvent=!0},doDraw:function(){""!=this.get("text")&&this.T.text(this.get("text"),this.x,this.y,!1,this.get("color"),this.get("textAlign"),this.get("textBaseline"),this.get("fontStyle"))},doConfig:function(){c.Text.superclass.doConfig.call(this)}});(function(a){function b(a){"string"===typeof a&&(a=document.getElementById(a));if(!a||!a.tagName||"canvas"!=a.tagName.toLowerCase())throw Error("there not a canvas element");this.canvas=a;this.c=this.canvas.getContext("2d");this.width=this.canvas.width;this.height=this.canvas.height}var c=Math.PI/90,d=Math.PI,g=Math.ceil,h=Math.floor,j=2*Math.PI,k=Math.max,l=Math.min,n=Math.sin,r=Math.cos,m=function(a,b){return 1==a?h(b)+0.5:Math.round(b)},s=function(a,b,c,e){var d=b.x,g=b.y,h=a[c-1],j=a[c+1],m,A;if(c<a.length-1){var a=h.y,c=j.y,n;m=(e*d+h.x)/(e+1);A=(e*g+a)/(e+1);j=(e*d+j.x)/(e+1);e=(e*g+c)/(e+1);n=(e-A)*(j-d)/(j-m)+g-e;A+=n;e+=n;A>a&&A>g?(A=k(a,g),e=2*g-A):A<a&&A<g&&(A=l(a,g),e=2*g-A);e>c&&e>g?(e=k(c,g),A=2*g-e):e<c&&e<g&&(e=l(c,g),A=2*g-e);b.rcx=j;b.rcy=e}return[h.rcx||h.x,h.rcy||h.y,m||d,A||g,d,g]};b.prototype={css:function(f,b){if(a.isDefined(b))this.canvas.style[f]=b;else return this.canvas.style[f]},arc:function(a,b,c,e,d,g,h,j,m,l,k,n,o,r,B,s,H){B=!!B;s=!!s;this.save();H&&this.gCO(H);h&&this.strokeStyle(j,m);this.shadowOn(l,k,n,o,r).fillStyle(g).moveTo(a,b).beginPath();this.c.arc(a,b,c,e,d,B);s&&this.lineTo(a,b);this.closePath().fill();h&&this.stroke();return this.restore()},ellipse:function(a,b,d,g,h,j,m,l,k,A,K,L,o,s,B,C,H,O){C=!!C;H=!!H;this.save();O&&this.gCO(O);g&&this.strokeStyle(k,A);this.shadowOn(K,L,o,s,B).fillStyle(m).moveTo(a,b).beginPath();for(H&&this.moveTo(a,b);h<=j;)this.lineTo(a+d*r(h),b+(C?-g*n(h):g*n(h))),h+=c;this.lineTo(a+d*r(j),b+(C?-g*n(j):g*n(j))).closePath();g&&this.stroke();m&&this.fill();return this.restore()},sector:function(a,b,c,e,d,g,h,j,m,l,k,n,o,r,s){l?(this.arc(a,b,c,e,d,g,h,j,m,l,k,n,o,r,s,!0),this.arc(a,b,c,e,d,g,h,j,m,!1,k,n,o,r,s,!0)):this.arc(a,b,c,e,d,g,h,j,m,!1,0,0,0,0,s,!0);return this},sector3D:function(){var f=function(f,b,g,h,j,u,v,m,z){if(v&&u<=d||!v&&j>=d)return!1;var l=function(a,c){this.lineTo(f+g*r(a),b+(c||0)+(v?-h*n(a):h*n(a)))},j=v&&u>d&&j<d?d:j,u=!v&&j<d&&u>d?d:u,k=j;for(this.fillStyle(a.dark(z)).moveTo(f+g*r(j),b+(v?-h*n(j):h*n(j))).beginPath();k<=u;)l.call(this,k),k+=c;l.call(this,u);this.lineTo(f+g*r(u),b+m+(v?-h*n(u):h*n(u)));for(k=u;k>=j;)l.call(this,k,m),k-=c;l.call(this,j,m);this.lineTo(f+g*r(j),b+(v?-h*n(j):h*n(j))).closePath().fill()},b=function(a,f,b,c,e,d,g,h){b=a+b*r(g);c=f+d+(e?-c*n(g):c*n(g));this.moveTo(a,f).beginPath().fillStyle(h).lineTo(a,f+d).lineTo(b,c).lineTo(b,c-d).lineTo(a,f).closePath().fill()},g=function(f,c,e,g,h,j,v,m,z){var k=v?h<d/2||h>1.5*d:h>d/2&&h<1.5*d,l=v?j>d/2&&j<1.5*d:j<d/2||j>1.5*d;if(!k&&!l)return!1;z=a.dark(z);k&&b.call(this,f,c,e,g,v,m,h,z);l&&b.call(this,f,c,e,g,v,m,j,z)},h=function(a,b,c,e,d,h,j,u,m,z,k,l,n,r,s,I,J){this.ellipse(a,b+j,c,e,d,h,u,m,z,k,l,n,r,s,I,J,!0);g.call(this,a,b,c,e,d,h,J,j,u);this.ellipse(a,b,c,e,d,h,u,m,z,k,!1,n,r,s,I,J,!0);f.call(this,a,b,c,e,d,h,J,j,u);return this};h.layerPaint=g;h.sPaint=f;h.layerDraw=b;return h}(),textStyle:function(a,b,c){return this.textAlign(a).textBaseline(b).textFont(c)},strokeStyle:function(a,b,c){a&&(this.c.lineWidth=a);b&&(this.c.strokeStyle=b);c&&(this.c.lineJoin=c);return this},globalAlpha:function(a){a&&(this.c.globalAlpha=a);return this},fillStyle:function(a){a&&(this.c.fillStyle=a);return this},arc2:function(a,b,c,e,d){this.c.arcTo(a,b,c,e,d);return this},textAlign:function(a){a&&(this.c.textAlign=a);return this},textBaseline:function(a){a&&(this.c.textBaseline=a);return this},textFont:function(a){a&&(this.c.font=a);return this},shadowOn:function(a,b,c,e,d){a&&(this.c.shadowColor=b,this.c.shadowBlur=c,this.c.shadowOffsetX=e,this.c.shadowOffsetY=d);return this},shadowOff:function(){this.c.shadowColor="white";this.c.shadowBlur=this.c.shadowOffsetX=this.c.shadowOffsetY=0;return this},avgLinearGradient:function(a,b,c,e,d){a=this.createLinearGradient(a,b,c,e);for(b=0;b<d.length;b++)a.addColorStop(b/(d.length-1),d[b]);return a},createLinearGradient:function(a,b,c,e){return this.c.createLinearGradient(a,b,c,e)},avgRadialGradient:function(a,b,c,e,d,g,h){a=this.createRadialGradient(a,b,c,e,d,g);for(b=0;b<h.length;b++)a.addColorStop(b/(h.length-1),h[b]);return a},createRadialGradient:function(a,b,c,e,d,g){return this.c.createRadialGradient(a,b,c,e,d,g)},fillText:function(a,b,c,e,d,g,h){a+="";e=e||!1;g=g||"lr";h=h||16;this.fillStyle(d);a.split("tb"==g?"":"\n").each(function(a){try{e?this.c.fillText(a,b,c,e):this.c.fillText(a,b,c),c+=h}catch(f){console.log(f.message+"["+a+","+b+","+c+"]")}},this);return this},measureText:function(a){return this.c.measureText(a).width},moveTo:function(a,b){this.c.moveTo(a||0,b||0);return this},lineTo:function(a,b){this.c.lineTo(a||0,b||0);return this},save:function(){this.c.save();return this},restore:function(){this.c.restore();return this},beginPath:function(){this.c.beginPath();return this},closePath:function(){this.c.closePath();return this},stroke:function(){this.c.stroke();return this},fill:function(){this.c.fill();return this},text:function(a,b,c,e,d,g,h,j,m,k){return this.save().textStyle(g,h,j).fillText(a,b,c,e,d,m,k).restore()},cube:function(b,c,e,d,g,h,j,k,l,n,r,s,o,E,B,C){b=m(n,b);c=m(n,c);j=j&&0<j?j:g;d=c-j*d;e=m(n,b+j*e);d=m(n,d);s&&(this.polygon(k,l,n,r,s,o,E,B,C,!1,[b,c,e,d,e+g,d,b+g,c]),this.polygon(k,l,n,r,s,o,E,B,C,!1,[b,c,b,c+h,b+g,c+h,b+g,c]),this.polygon(k,l,n,r,s,o,E,B,C,!1,[b+g,c,e+g,d,e+g,d+h,b+g,c+h]));this.polygon(a.dark(k),l,n,r,!1,o,E,B,C,!1,[b,c,e,d,e+g,d,b+g,c]);this.polygon(k,l,n,r,!1,o,E,B,C,!1,[b,c,b,c+h,b+g,c+h,b+g,c]);this.polygon(a.dark(k),l,n,r,!1,o,E,B,C,!1,[b+g,c,e+g,d,e+g,d+h,b+g,c+h]);return this},cube3D:function(b,c,e,d,g,h,j,k,l,n,r,s){b=m(n,b);c=m(n,c);k=!k||0==k?h:k;g?(d=a.vectorP2P(e,d),e=b+k*d.x,d=c-k*d.y):(e=b+k*e,d=c-k*d);for(;6>s.length;)s.push(!1);e=m(n,e);d=m(n,d);k=[];0>d?a.isObject(s[4])&&k.push(a.applyIf({points:[b,c-j,e,d-j,e+h,d-j,b+h,c-j]},s[4])):a.isObject(s[0])&&k.push(a.applyIf({points:[b,c,e,d,e+h,d,b+h,c]},s[0]));a.isObject(s[1])&&k.push(a.applyIf({points:[e,d,e,d-j,e+h,d-j,e+h,d]},s[1]));a.isObject(s[2])&&k.push(a.applyIf({points:[b,c,b,c-j,e,d-j,e,d]},s[2]));a.isObject(s[3])&&k.push(a.applyIf({points:[b+h,c,b+h,c-j,e+h,d-j,e+h,d]},s[3]));0>d?a.isObject(s[0])&&k.push(a.applyIf({points:[b,c,e,d,e+h,d,b+h,c]},s[0])):a.isObject(s[4])&&k.push(a.applyIf({points:[b,c-j,e,d-j,e+h,d-j,b+h,c-j]},s[4]));a.isObject(s[5])&&k.push(a.applyIf({points:[b,c,b,c-j,b+h,c-j,b+h,c]},s[5]));k.each(function(a){this.polygon(a.color,l,n,r,a.shadow,a.shadowColor,a.blur,a.sx,a.sy,a.alpha,a.points)},this);return this},polygon:function(a,b,c,e,d,g,h,j,k,m,l){if(!(2>l.length)){this.save().strokeStyle(c,e).beginPath().fillStyle(a).globalAlpha(m).shadowOn(d,g,h,j,k).moveTo(l[0],l[1]);for(a=2;a<l.length;a+=2)this.lineTo(l[a],l[a+1]);this.closePath();b&&this.stroke();this.fill().restore();return this}},lines:function(a,b,c,e){if(4>a.length)return this;this.save();e&&this.gCO(e);this.beginPath().strokeStyle(b,c).moveTo(m(b,a[0]),m(b,a[1]));for(c=2;c<a.length-1;c+=2)this.lineTo(m(b,a[c]),m(b,a[c+1]));return this.stroke().restore()},bezierCurveTo:function(a){this.c.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);return this},lineArray:function(a,b,c,e,d){if(2>a.length)return this;this.save().beginPath().strokeStyle(b,c).moveTo(m(b,a[0].x),m(b,a[0].y));if(e)for(c=1;c<a.length;c++)this.bezierCurveTo(s(a,a[c],c,d));else for(c=1;c<a.length;c++)this.lineTo(m(b,a[c].x),m(b,a[c].y));return this.stroke().restore()},line:function(a,b,c,e,d,g,h){if(!d||0==d)return this;this.save();h&&this.gCO(h);return this.beginPath().strokeStyle(d,g).moveTo(m(d,a),m(d,b)).lineTo(m(d,c),m(d,e)).stroke().restore()},round:function(a,b,c,e,d,g){return this.arc(a,b,c,0,j,e,!!g,d,g)},fillRect:function(a,b,c,e){this.c.fillRect(a,b,c,e);return this},translate:function(a,b){this.c.translate(a,b);return this},backgound:function(a,b,c,e,d){return this.save().gCO(!0).translate(a,b).beginPath().fillStyle(d).fillRect(0,0,c,e).restore()},rectangle:function(b,c,e,d,g,h,j,k,l,n,r,s,o){this.save().translate(m(j,b),m(j,c)).beginPath().fillStyle(g).shadowOn(l,n,r,s,o);g&&this.fillRect(0,0,e,d);h&&(a.isNumber(j)?(this.strokeStyle(j,k),this.c.strokeRect(0,0,e,d)):a.isArray(j)&&this.strokeStyle(0,k).line(0,0,e,0,j[0],k).line(e,0,e,d,j[1],k).line(0,d,e,d,j[2],k).line(0,0,0,d,j[3],k));return this.restore()},clearRect:function(a,b,c,e){c=c||this.width;e=e||this.height;this.c.clearRect(a||0,b||0,c,e);return this},gCO:function(a){this.c.globalCompositeOperation=a?"destination-over":"source-over";return this},drawBox:function(b,c,e,d,j,k,l,n,r,s,K,L,o,E){var B=a.isNumber(j),j=a.parsePadding(j),e=e-(j[1]+j[3])/2,d=d-(j[0]+j[2])/2,b=b+j[3]/2,c=c+j[0]/2,b=m(j[3],b),c=m(j[0],c),j=B?j[0]:j;this.save().translate(b,c).shadowOn(s,K,L,o,E);r&&this.gCO(r);n&&this.fillStyle(n);B&&this.strokeStyle(j,k);(l=!B||0==l||"0"==l?0:a.parsePadding(l))?(this.beginPath().moveTo(l[0],m(j,0)).lineTo(e-l[1],m(j,0)).arc2(e,m(j,0),e,l[1],l[1]).lineTo(m(j,e),d-l[2]).arc2(m(j,e),d,e-l[2],d,l[2]).lineTo(l[3],m(j,d)).arc2(0,m(j,d),0,d-l[3],l[3]).lineTo(m(j,0),l[0]).arc2(m(j,0),0,l[0],0,l[0]).closePath(),n&&this.fill(),j&&this.stroke()):B?(this.c.strokeRect(0,0,e,d),n&&this.fillRect(0,0,e,d)):(n&&this.beginPath().moveTo(h(j[3]/2),h(j[0]/2)).lineTo(g(e-j[1]/2),j[0]/2).lineTo(g(e-j[1]/2),g(d-j[2]/2)).lineTo(h(j[3]/2),g(d-j[2]/2)).lineTo(h(j[3]/2),h(j[0]/2)).closePath().fill(),k=a.isArray(k)?k:[k,k,k,k],this.line(e,j[0]/2,e,d-j[0]/2,j[1],k[1],0).line(0,j[0]/2,0,d-j[0]/2,j[3],k[3],0).line(h(-j[3]/2),0,e+j[1]/2,0,j[0],k[0],0).line(h(-j[3]/2),d,e+j[1]/2,d,j[2],k[2],0));return this.restore()},toImageURL:function(a){return this.canvas.toDataURL(a||"image/png")},addEvent:function(b,c,e){a.Event.addEvent(this.canvas,b,c,e)}};a.Chart=a.extend(a.Painter,{configure:function(){a.Chart.superclass.configure.apply(this,arguments);this.type="chart";this.set({render:"",data:[],width:void 0,height:void 0,lineJoin:"round",align:"center",default_mouseover_css:!0,showpercent:!1,decimalsnum:1,title:{text:"",fontweight:"bold",fontsize:20,height:30},subtitle:{text:"",fontweight:"bold",fontsize:16,height:20},footnote:{text:"",color:"#5d7f97",height:20},footnote_align:"right",title_align:"center",title_valign:"top",animation:!1,doAnimationFn:a.emptyFn,animation_timing_function:"easeInOut",duration_animation_duration:1E3,legend:{enable:!1},tip:{enable:!1}});this.registerEvent("parseData","parseTipText","beforeAnimation","afterAnimation","animating");this.T=null;this.animationed=this.rendered=!1;this.data=[];this.components=[];this.total=0},pushComponent:function(a,b){b?this.components.unshift(a):this.components.push(a)},plugin:function(a,b){this.init();a.inject(this);this.pushComponent(a,b)},toImageURL:function(){return this.T.toImageURL()},segmentRect:function(){this.T.clearRect(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"))},resetCanvas:function(){this.T.backgound(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"),this.get("f_color"))},animation:function(a){a.segmentRect();a.doAnimation(a.variable.animation.time,a.duration);a.resetCanvas();a.variable.animation.time<a.duration?(a.variable.animation.time++,requestAnimFrame(function(){a.animation(a)})):requestAnimFrame(function(){a.variable.animation.time=0;a.animationed=!0;a.draw();a.processAnimation=!1;a.fireEvent(a,"afterAnimation",[a])})},doAnimation:function(a,b){this.get("doAnimationFn").call(this,a,b)},commonDraw:function(){a.Assert.isTrue(this.rendered,this.type+" has not rendered.");a.Assert.isTrue(this.initialization,this.type+" has initialize failed.");a.Assert.gtZero(this.data.length,this.type+"'data is empty.");this.redraw||(this.title&&this.title.draw(),this.subtitle&&this.subtitle.draw(),this.footnote&&this.footnote.draw(),this.get("border.enable")?this.T.drawBox(0,0,this.width,this.height,this.get("border.width"),this.get("border.color"),this.get("border.radius"),this.get("f_color"),!0):this.T.backgound(0,0,this.width,this.height,this.get("f_color")));this.redraw=!0;!this.animationed&&this.get("animation")?(this.fireEvent(this,"beforeAnimation",[this]),this.animation(this)):(this.segmentRect(),this.components.eachAll(function(a){a.draw()},this),this.resetCanvas())},create:function(c){this.width=this.pushIf("width",400);this.height=this.pushIf("height",300);var e="width:"+this.width+"px;height:"+this.height+"px;padding:0px;overflow:hidden;position:relative;",d=a.iGather(this.type);this.shellid=a.iGather(this.type+"-shell");c.innerHTML="<div id='"+this.shellid+"' style='"+e+"'><canvas id= '"+d+"'  width='"+this.width+"' height="+this.height+"'><p>Your browser does not support the canvas element</p></canvas></div>";this.element=document.getElementById(d);this.shell=document.getElementById(this.shellid);this.T=this.target=new b(this.element);this.rendered=!0},render:function(a){this.push("render",a)},initialize:function(){if(!this.rendered){var b=this.get("render");"string"==typeof b&&document.getElementById(b)?this.create(document.getElementById(b)):"object"==typeof b&&this.create(b)}0<this.get("data").length&&this.rendered&&!this.initialization&&(a.Interface.parser.call(this,this.get("data")),this.doConfig(),this.initialization=!0)},doConfig:function(){a.Chart.superclass.doConfig.call(this);var b=this,c=b.variable.event,e=b.get("default_mouseover_css"),d,h;a.Assert.isArray(b.data);a.Interface._3D.call(b);b.T.strokeStyle(b.get("brushsize"),b.get("strokeStyle"),b.get("lineJoin"));b.processAnimation=b.get("animation");b.duration=g(b.get("duration_animation_duration")*a.FRAME/1E3);b.variable.animation={type:0,time:0,queue:[]};b.animationArithmetic=a.getAnimationArithmetic(b.get("animation_timing_function"));b.on("afterAnimation",function(){var a=b.variable.animation.queue.shift();a&&b[a.handler].apply(b,a.arguments)});["click","dblclick","mousemove"].each(function(c){b.T.addEvent(c,function(e){b.processAnimation||b.fireEvent(b,c,[b,a.Event.fix(e)])},!1)});b.on("click",function(a,b){a.components.eachAll(function(a){if(!a.preventEvent){var c=a.isMouseOver(b);c.valid&&a.fireEvent(a,"click",[a,b,c])}})});b.on("mousemove",function(a,b){d=h=!1;a.components.eachAll(function(f){if(!f.preventEvent){var g=f.variable.event,j=f.isMouseOver(b);j.valid?(d=!0,h=h||f.atomic,c.mouseover||(c.mouseover=!0,a.fireEvent(a,"mouseover",[b])),e&&h&&a.T.css("cursor","pointer"),g.mouseover||(g.mouseover=!0,f.fireEvent(f,"mouseover",[b,j])),f.fireEvent(f,"mousemove",[b,j])):g.mouseover&&(g.mouseover=!1,f.fireEvent(f,"mouseout",[b,j]))}});e&&!h&&c.mouseover&&a.T.css("cursor","default");!d&&c.mouseover&&(c.mouseover=!1,a.fireEvent(a,"mouseout",[b]))});b.push("l_originx",b.get("padding_left"));b.push("r_originx",b.width-b.get("padding_right"));b.push("t_originy",b.get("padding_top"));b.push("b_originy",b.height-b.get("padding_bottom"));b.push("client_width",b.get("width")-b.get("hpadding"));var j=0;a.isString(b.get("title"))&&b.push("title",{text:b.get("title"),fontweight:"bold",fontsize:20,height:30});a.isString(b.get("subtitle"))&&b.push("subtitle",{text:b.get("subtitle"),fontweight:"bold",fontsize:16,height:20});a.isString(b.get("footnote"))&&b.push("footnote",{text:b.get("footnote"),color:"#5d7f97",height:20});if(""!=b.get("title.text")){var m=""!=b.get("subtitle.text"),j=m?b.get("title.height")+b.get("subtitle.height"):b.get("title.height");"left"==b.get("title_align")?b.push("title.originx",b.get("padding_left")):"right"==b.get("title_align")?b.push("title.originx",b.width-b.get("padding_right")):b.push("title.originx",b.get("padding_left")+b.get("client_width")/2);b.push("t_originy",b.get("t_originy")+j);this.push("title.textAlign",this.get("title_align"));this.push("title.originy",this.get("padding_top"));this.push("title.textBaseline","top");this.title=new a.Text(this.get("title"),this);m&&(b.push("subtitle.originx",b.get("title.originx")),b.push("subtitle.originy",b.get("title.originy")+b.get("title.height")),b.push("subtitle.textAlign",b.get("title_align")),b.push("subtitle.textBaseline","top"),this.subtitle=new a.Text(this.get("subtitle"),this))}""!=b.get("footnote.text")&&(m=b.get("footnote.height"),j+=m,b.push("b_originy",b.get("b_originy")-m),"left"==b.get("footnote_align")?b.push("footnote.originx",b.get("padding_left")):"right"==b.get("footnote_align")?b.push("footnote.originx",b.width-b.get("padding_right")):b.push("footnote.originx",b.get("padding_left")+b.get("client_width")/2),this.push("footnote.textAlign",this.get("footnote_align")),this.push("footnote.originy",this.get("b_originy")),this.push("footnote.textBaseline","top"),this.footnote=new a.Text(this.get("footnote"),this));b.push("client_height",b.get("height")-b.get("vpadding")-j);b.push("minDistance",l(b.get("client_width"),b.get("client_height")));b.push("maxDistance",k(b.get("client_width"),b.get("client_height")));b.push("minstr",b.get("client_width")<b.get("client_height")?"width":"height");b.push("centerx",b.get("l_originx")+b.get("client_width")/2);b.push("centery",b.get("t_originy")+b.get("client_height")/2);b.get("legend.enable")&&(b.legend=new a.Legend(a.apply({maxwidth:b.get("client_width"),data:b.data},b.get("legend")),b),b.components.push(b.legend));b.get("tip.enable")&&b.push("tip.wrap",b.shell)}})})(c);c.Custom=c.extend(c.Component,{configure:function(){c.Custom.superclass.configure.apply(this,arguments);this.type="custom";this.set({drawFn:c.emptyFn,eventValid:void 0});this.registerEvent()},doDraw:function(a){this.get("drawFn").call(this,a)},isEventValid:function(a){return c.isFunction(this.get("eventValid"))?this.get("eventValid").call(this,a):{valid:!1}},doConfig:function(){c.Custom.superclass.doConfig.call(this)}});c.Scale=c.extend(c.Component,{configure:function(){c.Scale.superclass.configure.apply(this,arguments);this.type="scale";this.set({position:"left",which:"h",distance:void 0,start_scale:0,end_scale:void 0,min_scale:void 0,max_scale:void 0,scale_space:void 0,scale_share:5,scale_enable:!0,scale_size:1,scale_width:4,scale_color:"#333333",scaleAlign:"center",labels:[],scale2grid:!0,text_height:16,text_space:4,textAlign:"left",decimalsnum:0,join_style:"none",join_size:2});this.registerEvent("parseText");this.items=[];this.number=0},isEventValid:function(){return{valid:!1}},doDraw:function(){var a=0,b=0,c=0,d=0,g=0,h=0,j=this.get("scale_width"),k=j/2,l=this.get("scaleAlign"),n=this.get("textAlign"),r=this.get("text_space");this.isH?("top"==l?b=-j:"center"==l?(b=-k,d=k):d=j,this.T.textAlign("center"),"top"==n)?(h=-r,this.T.textBaseline("bottom")):(h=r,this.T.textBaseline("top")):("left"==l?a=-j:"center"==l?(a=-k,c=k):c=j,this.T.textBaseline("middle"),"right"==n)?(this.T.textAlign("left"),g=r):(this.T.textAlign("right"),g=-r);this.T.textFont(this.get("fontStyle"));for(j=0;j<this.items.length;j++)this.get("scale_enable")&&this.T.line(this.items[j].x+a,this.items[j].y+b,this.items[j].x+c,this.items[j].y+d,this.get("scale_size"),this.get("scale_color"),!1),this.T.fillText(this.items[j].text,this.items[j].textX+g,this.items[j].textY+h,!1,this.get("color"),"lr",this.get("text_height"))},doConfig:function(){c.Scale.superclass.doConfig.call(this);c.Assert.isNumber(this.get("distance"),"distance");var a=this.get("labels").length,b=this.get("min_scale"),e=this.get("max_scale"),d=this.get("scale_space"),g=this.get("end_scale"),h=this.get("start_scale");if(0<a)this.number=a-1;else{c.Assert.isTrue(c.isNumber(e)||c.isNumber(g),"max_scale&end_scale");if(!g||g<e)g=this.push("end_scale",c.ceil(e));h>b&&this.push("start_scale",c.floor(b));d&&d<g-h&&this.push("scale_share",(g-h)/d);if(!d||d>g-h)d=this.push("scale",(g-h)/this.get("scale_share"));this.number=this.get("scale_share");if(1>d&&0==this.get("decimalsnum"))for(b=d;1>b;)b*=10,this.push("decimalsnum",this.get("decimalsnum")+1)}this.push("distanceOne",this.get("valid_distance")/this.number);var b=0,j;this.T.textFont(this.get("fontStyle"));this.push("which",this.get("which").toLowerCase());this.isH="h"==this.get("which");for(var k=0;k<=this.number;k++)e=a?this.get("labels")[k]:(d*k+h).toFixed(this.get("decimalsnum")),g=this.isH?this.get("valid_x")+k*this.get("distanceOne"):this.x,j=this.isH?this.y:this.get("valid_y")+this.get("distance")-k*this.get("distanceOne"),this.items.push(c.merge({text:e,x:g,y:j,textX:g,textY:j},this.fireEvent(this,"parseText",[e,g,j,k]))),b=Math.max(b,this.T.measureText(e));this.left=this.right=this.top=this.bottom=0;a=this.get("text_space");d=this.get("textAlign");h=this.get("scaleAlign");e=this.get("scale_width");g=e/2;this.isH?(this.top="top"==h?e:"center"==h?g:0,this.bottom=e-this.top,"top"==d?this.top+=this.get("text_height")+a:this.bottom+=this.get("text_height")+a):(this.left="left"==h?e:"center"==h?g:0,this.right=e-this.left,"left"==d?this.left+=b+a:this.right+=b+a)}});c.Coordinate2D=c.extend(c.Component,{configure:function(){c.Coordinate2D.superclass.configure.apply(this,arguments);this.type="coordinate2d";this.set({sign_size:12,sign_space:5,scale:[],valid_width:void 0,valid_height:void 0,grid_line_width:1,grid_color:"#dbe1e1",gridlinesVisible:!0,scale2grid:!0,grids:void 0,ignoreOverlap:!0,ignoreEdge:!1,xlabel:"",ylabel:"",alternate_color:!0,alternate_direction:"v",alternate_color_factor:0.01,crosshair:{enable:!1},width:void 0,height:void 0,axis:{enable:!0,color:"#666666",width:1}});this.registerEvent();this.scale=[];this.gridlines=[]},getScale:function(a){for(var b=0;b<this.scale.length;b++){var c=this.scale[b];if(c.get("position")==a)return{start:c.get("start_scale"),end:c.get("end_scale"),distance:c.get("end_scale")-c.get("start_scale")}}return{start:0,end:0,distance:0}},isEventValid:function(a){return{valid:a.offsetX>this.x&&a.offsetX<this.x+this.get("width")&&a.offsetY<this.y+this.get("height")&&a.offsetY>this.y}},doDraw:function(){this.T.rectangle(this.x,this.y,this.get("width"),this.get("height"),this.get("f_color"));if(this.get("alternate_color")){var a,b,e=!1,d=[0,0,0,0],g=c.dark(this.get("f_color"),this.get("alternate_color_factor"));this.get("axis.enable")&&(d=this.get("axis.width"))}for(var h=this.gridlines,j=this.get("grid_line_width"),k="v"==this.get("alternate_direction"),l=0;l<h.length;l++)h[l].x1=Math.round(h[l].x1),h[l].y1=Math.round(h[l].y1),h[l].x2=Math.round(h[l].x2),h[l].y2=Math.round(h[l].y2),this.get("alternate_color")&&(e&&(k?this.T.rectangle(h[l].x1+d[3],h[l].y1+j,h[l].x2-h[l].x1-d[3]-d[1],b-h[l].y1-j,g):this.T.rectangle(a+j,h[l].y2+d[0],h[l].x1-a,h[l].y1-h[l].y2-d[0]-d[2],g)),a=h[l].x1,b=h[l].y1,e=!e),this.T.line(h[l].x1,h[l].y1,h[l].x2,h[l].y2,j,this.get("grid_color"));this.T.rectangle(this.x,this.y,this.get("width"),this.get("height"),!1,this.get("axis.enable"),this.get("axis.width"),this.get("axis.color"),this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"));for(l=0;l<this.scale.length;l++)this.scale[l].draw()},doConfig:function(){c.Coordinate2D.superclass.doConfig.call(this);c.Assert.isNumber(this.get("width"),"width");c.Assert.isNumber(this.get("height"),"height");this.atomic=!1;this.get("gradient")&&c.isString(this.get("background_color"))&&this.push("f_color",this.T.avgLinearGradient(this.x,this.y,this.x,this.y+this.get("height"),[this.get("dark_color"),this.get("light_color")]));if(this.get("axis.enable")){var a=this.get("axis.width");c.isArray(a)||this.push("axis.width",[a,a,a,a])}this.get("crosshair.enable")&&(this.push("crosshair.wrap",this.container.shell),this.push("crosshair.height",this.get("height")),this.push("crosshair.width",this.get("width")),this.push("crosshair.top",this.y),this.push("crosshair.left",this.x),this.crosshair=new c.CrossHair(this.get("crosshair"),this));var b,e=!(!this.get("gridlinesVisible")||!this.get("grids")),a=e&&!!this.get("grids.horizontal"),d=e&&!!this.get("grids.vertical"),g=this.get("height"),h=this.get("width"),j=this.get("valid_width"),k=this.get("valid_height"),l=this.get("gridlinesVisible")&&this.get("scale2grid")&&!(a&&d),n=(h-j)/2,r=(g-k)/2,m=this.get("axis.width");c.isArray(this.get("scale"))||(c.isObject(this.get("scale"))?this.push("scale",[this.get("scale")]):this.push("scale",[]));this.get("scale").each(function(a){b=(b=a.position)||"left";b=b.toLowerCase();a.originx=this.x;a.originy=this.y;a.valid_x=this.x+n;a.valid_y=this.y+r;a.position=b;if(b=="top"){a.which="h";a.distance=h;a.valid_distance=j}else if(b=="right"){a.which="v";a.distance=g;a.valid_distance=k;a.originx=a.originx+h;a.valid_x=a.valid_x+j}else if(b=="bottom"){a.which="h";a.distance=h;a.valid_distance=j;a.originy=a.originy+g;a.valid_y=a.valid_y+k}else{a.which="v";a.distance=g;a.valid_distance=k}this.scale.push(new c.Scale(a,this.container))},this);if(e=this.push("ignoreOverlap",this.get("ignoreOverlap")&&this.get("axis.enable")||this.get("ignoreEdge")))var s=this.get("ignoreEdge")?function(a,b,c){return a=="v"?c==this.y||c==this.y+g:b==this.x||b==this.x+a}:function(a,b,c){return a=="v"?c==this.y&&m[0]>0||c==this.y+g&&m[2]>0:b==this.x&&m[3]>0||b==this.x+h&&m[1]>0};if(l)for(var f,u,v,l=0;l<this.scale.length;l++)if(f=this.scale[l],!c.isFalse(f.get("scale2grid"))&&!(a&&"v"==f.get("which")||d&&"h"==f.get("which"))){u=v=0;"top"==f.get("position")?v=g:"right"==f.get("position")?u=-h:"bottom"==f.get("position")?v=-g:u=h;for(var z=0;z<f.items.length;z++)(!e||!s.call(this,f.get("which"),f.items[z].x,f.items[z].y))&&this.gridlines.push({x1:f.items[z].x,y1:f.items[z].y,x2:f.items[z].x+u,y2:f.items[z].y+v})}if(d){l=this.get("grids.vertical");c.Assert.gtZero(l.value,"value");d=h/l.value;f=l.value;"given_value"==l.way&&(f=d,d=l.value,d=d>h?h:d);for(l=0;l<=f;l++)(!e||!s.call(this,"h",this.x+l*d,this.y))&&this.gridlines.push({x1:this.x+l*d,y1:this.y,x2:this.x+l*d,y2:this.y+g})}if(a){a=this.get("grids.horizontal");c.Assert.gtZero(a.value,"value");d=g/a.value;f=a.value;"given_value"==a.way&&(f=d,d=a.value,d=d>g?g:d);for(l=0;l<=f;l++)(!e||!s.call(this,"v",this.x,this.y+l*d))&&this.gridlines.push({x1:this.x,y1:this.y+l*d,x2:this.x+h,y2:this.y+l*d})}}});c.Coordinate3D=c.extend(c.Coordinate2D,{configure:function(){c.Coordinate3D.superclass.configure.apply(this,arguments);this.type="coordinate3d";this.dimension=c._3D;this.set({xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,zHeight:0,pedestal_height:22,board_deep:20,gradient:!0,color_factor:0.18,ignoreEdge:!0,alternate_color:!1,grid_color:"#7a8d44",background_color:"#d6dbd2",shadow_offsetx:4,shadow_offsety:2,wall_style:[],axis:{enable:!1}})},doDraw:function(){var a=this.get("width"),b=this.get("height"),c=this.get("xAngle_"),d=this.get("yAngle_"),g=this.get("zHeight"),h=c*g,j=d*g,k=this.gridlines;this.T.cube3D(this.x,this.y+b+this.get("pedestal_height"),c,d,!1,a,this.get("pedestal_height"),3*g/2,this.get("axis.enable"),this.get("axis.width"),this.get("axis.color"),this.get("bottom_style"));this.T.cube3D(this.x+this.get("board_deep")*c,this.y+b-this.get("board_deep")*d,c,d,!1,a,b,g,this.get("axis.enable"),this.get("axis.width"),this.get("axis.color"),this.get("board_style"));this.T.cube3D(this.x,this.y+b,c,d,!1,a,b,g,this.get("axis.enable"),this.get("axis.width"),this.get("axis.color"),this.get("wall_style"));for(a=0;a<k.length;a++)this.T.line(k[a].x1,k[a].y1,k[a].x1+h,k[a].y1-j,this.get("grid_line_width"),this.get("grid_color")),this.T.line(k[a].x1+h,k[a].y1-j,k[a].x2+h,k[a].y2-j,this.get("grid_line_width"),this.get("grid_color"));for(a=0;a<this.scale.length;a++)this.scale[a].draw()},doConfig:function(){c.Coordinate3D.superclass.doConfig.call(this);var a=this.get("background_color"),b=c.dark(a,0.1),e=this.get("height"),d=this.get("width");3>this.get("wall_style").length&&this.push("wall_style",[{color:b},{color:a},{color:b}]);var g=this.get("wall_style")[0].color;this.push("bottom_style",[{color:a,shadow:this.get("shadow"),shadowColor:this.get("shadow_color"),blur:this.get("shadow_blur"),sx:this.get("shadow_offsetx"),sy:this.get("shadow_offsety")},!1,!1,{color:g},{color:g},{color:g}]);this.push("board_style",[!1,!1,!1,{color:g},{color:a},!1]);if(this.get("gradient")){var h=this.get("xAngle_")*this.get("zHeight"),j=this.get("yAngle_")*this.get("zHeight"),k=this.get("wall_style"),l=this.get("bottom_style");c.isString(k[0].color)&&(k[0].color=this.T.avgLinearGradient(this.x,this.y+e,this.x+d,this.y+e,[g,this.get("dark_color")]));c.isString(k[1].color)&&(k[1].color=this.T.avgLinearGradient(this.x+h,this.y-j,this.x+h,this.y+e-j,[this.get("dark_color"),this.get("light_color")]));c.isString(k[2].color)&&(k[2].color=this.T.avgLinearGradient(this.x,this.y,this.x,this.y+e,[a,this.get("dark_color")]));l[5].color=this.T.avgLinearGradient(this.x,this.y+e,this.x,this.y+e+this.get("pedestal_height"),[a,b])}}});c.Rectangle=c.extend(c.Component,{configure:function(){c.Rectangle.superclass.configure.apply(this,arguments);this.type="rectangle";this.set({width:0,height:0,value_space:4,value:"",name:"",tipAlign:"top",valueAlign:"top",textAlign:"center",textBaseline:"top",shadow_blur:3,shadow_offsety:-1});this.atomic=!0;this.registerEvent("drawLabelText")},doDraw:function(){this.drawRectangle();this.drawValue()},doConfig:function(){c.Rectangle.superclass.doConfig.call(this);c.Assert.gtZero(this.get("width"),"width");this.width=this.get("width");this.height=this.get("height");this.centerX=this.x+this.width/2;this.centerY=this.y+this.height/2;this.get("tip.enable")&&("follow"!=this.get("tip.showType")&&this.push("tip.invokeOffsetDynamic",!1),this.tip=new c.Tip(this.get("tip"),this));this.variable.event.highlight=!1;this.on("mouseover",function(){this.variable.event.highlight=true;this.redraw();this.variable.event.highlight=false}).on("mouseout",function(){this.variable.event.highlight=false;this.redraw()});this.on("beforedraw",function(){this.push("f_color",this.variable.event.highlight?this.get("light_color"):this.get("background_color"));return true})}});c.Rectangle2D=c.extend(c.Rectangle,{configure:function(){c.Rectangle2D.superclass.configure.apply(this,arguments);this.type="rectangle2d";this.set({shadow_offsety:-2})},drawValue:function(){""!=this.get("value")&&this.T.text(this.fireString(this,"drawLabelText",[this,this.get("value")],this.get("value")),this.get("value_x"),this.get("value_y"),!1,this.get("color"),this.get("textAlign"),this.get("textBaseline"),this.get("fontStyle"))},drawRectangle:function(){this.T.rectangle(this.get("originx"),this.get("originy"),this.get("width"),this.get("height"),this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"))},isEventValid:function(a){return{valid:a.offsetX>this.x&&a.offsetX<this.x+this.width&&a.offsetY<this.y+this.height&&a.offsetY>this.y}},tipInvoke:function(){var a=this;return function(b,c){return{left:a.tipX(b,c),top:a.tipY(b,c)}}},doConfig:function(){c.Rectangle2D.superclass.doConfig.call(this);var a=this,b=a.get("tipAlign"),e=a.get("valueAlign");"left"==b||"right"==b?a.tipY=function(b,c){return a.centerY-c/2}:a.tipX=function(b){return a.centerX-b/2};"left"==b?a.tipX=function(b){return a.x-a.get("value_space")-b}:"right"==b?a.tipX=function(){return a.x+a.width+a.get("value_space")}:a.tipY="bottom"==b?function(){return a.y+a.height+3}:function(b,c){return a.y-c-3};"left"==e?(a.push("textAlign","right"),a.push("value_x",a.x-a.get("value_space")),a.push("value_y",a.centerY)):"right"==e?(a.push("textAlign","left"),a.push("textBaseline","middle"),a.push("value_x",a.x+a.width+a.get("value_space")),a.push("value_y",a.centerY)):"bottom"==e?(a.push("value_x",a.centerX),a.push("value_y",a.y+a.height+a.get("value_space")),a.push("textBaseline","top")):(a.push("value_x",a.centerX),a.push("value_y",a.y-a.get("value_space")),a.push("textBaseline","bottom"));a.valueX=a.get("value_x");a.valueY=a.get("value_y")}});c.Rectangle3D=c.extend(c.Rectangle,{configure:function(){c.Rectangle3D.superclass.configure.apply(this,arguments);this.type="rectangle3d";this.dimension=c._3D;this.set({zHeight:void 0,xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,shadow_offsetx:2})},drawValue:function(){""!=this.get("value")&&this.T.text(this.get("value"),this.centerX,this.topCenterY+this.get("value_space"),!1,this.get("color"),"center","top",this.get("fontStyle"))},drawRectangle:function(){this.T.cube(this.get("originx"),this.get("originy"),this.get("xAngle_"),this.get("yAngle_"),this.get("width"),this.get("height"),this.get("zHeight"),this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("light_color"),this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"))},isEventValid:function(a){return{valid:!this.preventEvent&&a.offsetX>this.x&&a.offsetX<this.x+this.get("width")&&a.offsetY<this.y+this.get("height")&&a.offsetY>this.y}},tipInvoke:function(){var a=this;return function(b,c){return{left:a.topCenterX-b/2,top:a.topCenterY-c}}},doConfig:function(){c.Rectangle3D.superclass.doConfig.call(this);this.pushIf("zHeight",this.get("width"));this.centerX=this.x+this.get("width")/2;this.topCenterX=this.x+(this.get("width")+this.get("width")*this.get("xAngle_"))/2;this.topCenterY=this.y-this.get("width")*this.get("yAngle_")/2}});c.Sector=c.extend(c.Component,{configure:function(){c.Sector.superclass.configure.apply(this,arguments);this.type="sector";this.set({value:"",name:"",counterclockwise:!1,startAngle:0,middleAngle:0,endAngle:0,totalAngle:0,bound_event:"click",expand:!1,mutex:!1,increment:void 0,label:{enable:!0}});this.atomic=!0;this.registerEvent("changed");this.tip=this.label=null},bound:function(){this.expanded||this.toggle()},rebound:function(){this.expanded&&this.toggle()},toggle:function(){this.fireEvent(this,this.get("bound_event"),[this])},doDraw:function(){this.drawSector();this.label&&this.label.draw()},labelInvoke:function(a){this.get("middleAngle");var b=this.label;x=this.get("inc_x")*a;y=-this.get("inc_y")*a;b.push("originx",b.get("originx")+x);b.push("originy",b.get("originy")+y);b.push("labelx",b.get("labelx")+x);b.push("labely",b.get("labely")+y);var c=[];b.get("line_potins").each(function(a,b){c.push(0==b%2?a+x:a+y)},b);b.push("line_potins",c)},doConfig:function(){c.Sector.superclass.doConfig.call(this);var a=this;a.push("totalAngle",a.get("endAngle")-a.get("startAngle"));this.get("label.enable")&&(a.pushIf("label.border.color",a.get("border.color")),a.push("label.scolor",a.get("background_color")));a.variable.event.status=a.expanded=a.get("expand");a.get("tip.enable")&&("follow"!=a.get("tip.showType")&&a.push("tip.invokeOffsetDynamic",!1),a.tip=new c.Tip(a.get("tip"),a));a.variable.event.poped=!1;a.on(a.get("bound_event"),function(a){a.variable.event.poped=true;a.expanded=!a.expanded;a.redraw();a.variable.event.poped=false});a.on("beforedraw",function(){a.x=a.get("originx");a.y=a.get("originy");if(a.variable.event.status!=a.expanded){a.fireEvent(a,"changed",[a,a.expanded]);a.get("label.enable")&&a.labelInvoke(a.expanded?1:-1)}if(a.variable.event.status=a.expanded)if(a.get("mutex")&&!a.variable.event.poped)a.expanded=false;else{a.x=a.x+a.get("inc_x");a.y=a.y-a.get("inc_y")}return true})}});c.Sector2D=c.extend(c.Sector,{configure:function(){c.Sector2D.superclass.configure.apply(this,arguments);this.type="sector2d";this.set({radius:0})},drawSector:function(){this.T.sector(this.x,this.y,this.r,this.get("startAngle"),this.get("endAngle"),this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"),this.get("counterclockwise"))},isEventValid:function(a){return this.label&&this.label.isEventValid(a).valid?{valid:!0}:this.r<c.distanceP2P(this.x,this.y,a.offsetX,a.offsetY)?{valid:!1}:c.angleInRange(this.get("startAngle"),this.get("endAngle"),2*Math.PI-c.atan2Radian(this.x,this.y,a.offsetX,a.offsetY))?{valid:!0}:{valid:!1}},tipInvoke:function(){return function(a,b){var e=c.p2Point(this.x,this.y,this.get("middleAngle"),0.8*this.r),d=c.quadrantd(this.get("middleAngle"));return{left:2<=d&&3>=d?e.x-a:e.x,top:3<=d?e.y-b:e.y}}},doConfig:function(){c.Sector2D.superclass.doConfig.call(this);this.r=this.get("radius");c.Assert.gtZero(this.r);this.get("gradient")&&this.push("f_color",this.T.avgRadialGradient(this.x,this.y,0,this.x,this.y,this.r,[this.get("light_color"),this.get("dark_color")]));this.pushIf("increment",c.lowTo(5,this.r/8));var a=this.get("middleAngle"),b=this.get("increment");this.push("inc_x",b*Math.cos(2*Math.PI-a));this.push("inc_y",b*Math.sin(2*Math.PI-a));this.get("label.enable")&&(this.pushIf("label.linelength",c.lowTo(10,this.r/8)),Q=c.quadrantd(a),P2=c.p2Point(this.x,this.y,a,this.r/2),this.push("label.originx",P2.x),this.push("label.originy",P2.y),this.push("label.quadrantd",Q),a=c.p2Point(this.x,this.y,a,this.r+this.get("label.linelength")),this.push("label.line_potins",[P2.x,P2.y,a.x,a.y]),this.push("label.labelx",a.x),this.push("label.labely",a.y),this.label=new c.Label(this.get("label"),this))}});c.Sector3D=c.extend(c.Sector,{configure:function(){c.Sector3D.superclass.configure.apply(this,arguments);this.type="sector3d";this.dimension=c._3D;this.set({semi_major_axis:0,semi_minor_axis:0,cylinder_height:0})},drawSector:function(){this.T.sector3D(this.x,this.y,this.a,this.b,this.get("startAngle"),this.get("endAngle"),this.h,this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"),this.get("counterclockwise"))},isEventValid:function(a){return this.get("label.enable")&&this.label.isEventValid(a).valid?{valid:!0}:!c.inEllipse(a.offsetX-this.x,a.offsetY-this.y,this.a,this.b)?{valid:!1}:c.inRange(this.sA,this.eA,2*Math.PI-c.atan2Radian(this.x,this.y,a.offsetX,a.offsetY))?{valid:!0}:{valid:!1}},p2p:function(a,b,c,d){return{x:a+this.a*Math.cos(c)*d,y:b+this.b*Math.sin(c)*d}},tipInvoke:function(){var a=this,b=a.get("middleAngle"),e=c.quadrantd(b);return function(c,g){var h=a.p2p(a.x,a.y,b,0.6);return{left:2<=e&&3>=e?h.x-c:h.x,top:3<=e?h.y-g:h.y}}},doConfig:function(){c.Sector3D.superclass.doConfig.call(this);var a=this,b=a.get("counterclockwise"),e=a.get("middleAngle");a.a=a.get("semi_major_axis");a.b=a.get("semi_minor_axis");a.h=a.get("cylinder_height");c.Assert.gtZero(a.a);c.Assert.gtZero(a.b);a.pushIf("increment",c.lowTo(5,a.a/8));var d=function(e){e=c.atan2Radian(0,0,a.a*Math.cos(e),b?-a.b*Math.sin(e):a.b*Math.sin(e));!b&&0!=e&&(e=2*Math.PI-e);return e},g=this.get("increment");a.sA=d.call(a,a.get("startAngle"));a.eA=d.call(a,a.get("endAngle"));a.mA=d.call(a,e);a.push("inc_x",g*Math.cos(2*Math.PI-a.mA));a.push("inc_y",g*Math.sin(2*Math.PI-a.mA));if(a.get("label.enable")){a.pushIf("label.linelength",c.lowTo(10,a.a/8));a.Z=a.get("label.linelength")/a.a+1;var d=c.quadrantd(e),g=a.p2p(a.x,a.y,e,a.Z),h=a.p2p(a.x,a.y,e,1);a.push("label.originx",h.x);a.push("label.originy",h.y);a.push("label.quadrantd",d);a.push("label.line_potins",[h.x,h.y,g.x,g.y]);a.push("label.line_globalComposite",b&&e<Math.PI||!b&&e>Math.PI);a.push("label.labelx",g.x);a.push("label.labely",g.y);a.label=new c.Label(a.get("label"),a)}}});c.Pie=c.extend(c.Chart,{configure:function(){c.Pie.superclass.configure.call(this);this.type="pie";this.dataType="simple";this.set({radius:0,offsetAngle:0,bound_event:"click",counterclockwise:!1,intellectLayout:!0,pop_animate:!1,mutex:!1,increment:void 0,label:{enable:!0},sector:{}});this.registerEvent("bound","rebound","parseLabelText");this.sectors=[]},toggle:function(a){this.data[a||0].reference.toggle()},bound:function(a){this.data[a||0].reference.bound()},rebound:function(a){this.data[a||0].reference.rebound()},getSectors:function(){return this.sectors},doAnimation:function(a,b){var c,d=0,g=this.oA;this.data.each(function(h){c=h.reference;d=this.animationArithmetic(a,0,c.get("totalAngle"),b);c.push("startAngle",g);c.push("endAngle",g+d);g+=d;this.is3D()||c.drawSector()},this);this.is3D()&&this.proxy.drawSector()},localizer:function(a){this.sectors.each(function(b){var b=b.label,c=b.labelx,d=b.labely;if(a.labely<=d&&d-a.labely<a.get("height")||a.labely>d&&a.labely-d<b.get("height"))if(a.labelx<c&&c-a.labelx<a.get("width")||a.labelx>c&&a.labelx-c<b.get("width"))c=a.get("quadrantd"),2==c||3==c?a.push("labely",a.get("labely")-a.get("height")+d-a.labely-2):a.push("labely",a.get("labely")+b.get("height")-a.labely+d+2),a.push("line_potins",a.get("line_potins").concat(a.get("labelx"),a.get("labely"))),a.localizer()},this)},doParse:function(a,b){var e=this,d=a.name+(e.get("showpercent")?" "+c.toPercent(a.value/e.total,e.get("decimalsnum")):a.value);e.get("label.enable")&&e.push("sector.label.text",e.fireString(e,"parseLabelText",[a,b],d));e.get("tip.enable")&&e.push("sector.tip.text",e.fireString(e,"parseTipText",[a,b],d));e.push("sector.id",b);e.push("sector.value",a.value);e.push("sector.name",a.name);e.push("sector.listeners.changed",function(a,b){e.fireEvent(e,b?"bound":"rebound",[e,a.get("name")])});e.push("sector.startAngle",a.startAngle);e.push("sector.middleAngle",a.middleAngle);e.push("sector.endAngle",a.endAngle);e.push("sector.background_color",a.color);a.reference=this.doSector(a);this.sectors.push(a.reference);this.get("label.enable")&&this.get("intellectLayout")&&this.localizer(a.reference.label)},calculate:function(){var a=this.oA,b=a,c=this.data.length;this.data.each(function(d,g){a+=2*d.value/this.total*Math.PI;g==c-1&&(a=2*Math.PI+this.oA);d.startAngle=b;d.endAngle=a;d.totalAngle=a-b;d.middleAngle=(b+a)/2;b=a},this)},doConfig:function(){c.Pie.superclass.doConfig.call(this);c.Assert.gtZero(this.total,"this.total");this.oA=c.angle2Radian(this.get("offsetAngle"));var a=this.get("radius"),b=this.get("minDistance")*(this.get("label.enable")&&!this.is3D()?0.35:0.5);this.calculate();if(0>=a||a>b)a=this.push("radius",Math.floor(b));this.r=a;this.pushIf("increment",c.lowTo(5,a/8));"left"==this.get("align")?this.push("originx",a+this.get("l_originx")+this.get("offsetx")):"right"==this.get("align")?this.push("originx",this.get("r_originx")-a+this.get("offsetx")):this.push("originx",this.get("centerx")+this.get("offsetx"));this.push("originy",this.get("centery")+this.get("offsety"));c.apply(this.get("sector"),c.clone("originx,originy,bound_event,customize_layout,counterclockwise,mutex,shadow,shadow_color,shadow_blur,shadow_offsetx,shadow_offsety,increment,gradient,color_factor,label,tip".split(","),this.options))}});c.Pie2D=c.extend(c.Pie,{configure:function(){c.Pie2D.superclass.configure.call(this);this.type="pie2d"},doSector:function(){return new c.Sector2D(this.get("sector"),this)},doConfig:function(){c.Pie2D.superclass.doConfig.call(this);this.push("sector.radius",this.r);this.data.each(function(a,b){this.doParse(a,b)},this);this.pushComponent(this.sectors)}});c.Pie3D=c.extend(c.Pie,{configure:function(){c.Pie3D.superclass.configure.apply(this,arguments);this.type="pie3d";this.dimension=c._3D;this.set({zRotate:45,yHeight:30})},doSector:function(a){this.push("sector.cylinder_height",a.height?a.height*Math.cos(c.angle2Radian(this.get("zRotate"))):this.get("cylinder_height"));a=new c.Sector3D(this.get("sector"),this);a.proxy=!0;return a},doConfig:function(){c.Pie3D.superclass.doConfig.call(this);var a=this,b=a.get("zRotate");a.push("zRotate",c.between(0,90,90-b));a.push("cylinder_height",a.get("yHeight")*Math.cos(c.angle2Radian(b)));a.push("sector.semi_major_axis",a.r);a.push("sector.semi_minor_axis",a.r*b/90);a.push("sector.semi_major_axis",a.r);a.push("sector.originy",a.get("originy")-a.get("yHeight")/2);a.data.each(function(b,c){a.doParse(b,c)},a);a.pushComponent(a.sectors);a.proxy=new c.Custom({drawFn:function(){this.drawSector();a.get("label.enable")&&a.sectors.eachAll(function(a){a.label.draw()},a)}});var e=[],d=Math.PI,g=2*d,h=d/2,j=1.5*d,k=a.get("counterclockwise"),l=function(a,b){a=Math.abs(a-b);return a>d?g-a:a};a.proxy.drawSector=function(){a.sectors.eachAll(function(b){a.T.ellipse(b.x,b.y+b.h,b.a,b.b,b.get("startAngle"),b.get("endAngle"),b.get("f_color"),b.get("border.enable"),b.get("border.width"),b.get("border.color"),b.get("shadow"),b.get("shadow_color"),b.get("shadow_blur"),b.get("shadow_offsetx"),b.get("shadow_offsety"),k,!0)},a);e=[];var b,d;a.sectors.eachAll(function(a){b=a.get("startAngle");d=a.get("endAngle");fc=c.dark(a.get("f_color"));(k?b<h||b>j:b>h&&b<j)&&e.push({g:b,x:a.x,y:a.y,a:a.a,b:a.b,color:fc,h:a.h});(k?d>h&&d<j:d<h||d>j)&&e.push({g:d,x:a.x,y:a.y,a:a.a,b:a.b,color:fc,h:a.h})},a);e.sort(function(a,b){return l(a.g,j)-l(b.g,j)});e.eachAll(function(b){a.T.sector3D.layerDraw.call(a.T,b.x,b.y,b.a,b.b,k,b.h,b.g,b.color)},a);a.sectors.sort(function(a,b){return l(b.get("startAngle"),h)-l(a.get("startAngle"),h)});a.sectors.eachAll(function(b){a.T.sector3D.sPaint.call(a.T,b.x,b.y,b.a,b.b,b.get("startAngle"),b.get("endAngle"),!1,b.h,b.get("f_color"))},a);a.sectors.eachAll(function(b){a.T.ellipse(b.x,b.y,b.a,b.b,b.get("startAngle"),b.get("endAngle"),b.get("f_color"),b.get("border.enable"),b.get("border.width"),b.get("border.color"),!1,0,0,0,0,!1,!0)},a)};a.pushComponent(a.proxy)}});c.Column=c.extend(c.Chart,{configure:function(){c.Column.superclass.configure.call(this);this.type="column";this.dataType="simple";this.set({coordinate:{},colwidth:void 0,text_space:6,scaleAlign:"left",rectangle:{}});this.registerEvent();this.rectangles=[];this.labels=[];this.labels.ignore=!0},doAnimation:function(a,b){var c,d;this.coo.draw();for(var g=0;g<this.labels.length;g++)this.labels[g].draw();for(g=0;g<this.rectangles.length;g++)c=this.rectangles[g],d=Math.ceil(this.animationArithmetic(a,0,c.height,b)),c.push("originy",c.y+(c.height-d)),c.push("height",d),c.drawRectangle()},getCoordinate:function(){return this.coo},doParse:function(a,b,e,d,g,h){var j=this.get("showpercent")?c.toPercent(a.value/this.total,this.get("decimalsnum")):a.value;this.get("tip.enable")&&this.push("rectangle.tip.text",this.fireString(this,"parseTipText",[a,a.value,b],a.name+" "+j));this.push("rectangle.value",j);this.push("rectangle.name",a.name);this.push("rectangle.background_color",a.color);this.push("rectangle.id",e);this.push("rectangle.originx",d);this.push("rectangle.originy",g);this.push("rectangle.height",h)},doConfig:function(){c.Column.superclass.doConfig.call(this);c.Interface.coordinate.call(this);if("simple"==this.dataType){var a=this.data.length,b=this.get("coordinate.width"),e=this.pushIf("colwidth",b/(2*a+1));e*a>b&&(e=this.push("colwidth",b/(2*a+1)));this.push("hispace",(b-e*a)/(a+1))}this.is3D()&&this.push("zHeight",this.get("colwidth")*this.get("zScale"));this.coo=c.Interface.coordinate_.call(this);this.pushComponent(this.coo,!0);c.apply(this.get("rectangle"),c.clone("shadow,shadow_color,shadow_blur,shadow_offsetx,shadow_offsety,gradient,color_factor,label,tip".split(","),this.options));this.push("rectangle.width",this.get("colwidth"))}});c.Column2D=c.extend(c.Column,{configure:function(){c.Column2D.superclass.configure.call(this);this.type="column2d"},doConfig:function(){c.Column2D.superclass.doConfig.call(this);var a=this.coo.getScale(this.get("scaleAlign")),b=this.coo.get("brushsize"),e=this.coo.get("height"),d=this.get("colwidth")/2,g=this.get("colwidth")+this.get("hispace"),h;this.data.each(function(j,k){h=(j.value-a.start)*e/a.distance;this.doParse(j,k,k,this.x+this.get("hispace")+k*g,this.y+e-h-b,h);j.reference=new c.Rectangle2D(this.get("rectangle"),this);this.rectangles.push(j.reference);this.labels.push(new c.Text({id:k,text:j.name,originx:this.x+this.get("hispace")+g*k+d,originy:this.y+e+this.get("text_space")},this))},this);this.pushComponent(this.labels);this.pushComponent(this.rectangles)}});c.Column3D=c.extend(c.Column,{configure:function(){c.Column3D.superclass.configure.call(this);this.type="column3d";this.dimension=c._3D;this.set({xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){c.Column3D.superclass.doConfig.call(this);this.push("rectangle.xAngle_",this.get("xAngle_"));this.push("rectangle.yAngle_",this.get("yAngle_"));var a=this.coo.getScale(this.get("scaleAlign")),b=this.get("zHeight")*(this.get("bottom_scale")-1)/2*this.get("yAngle_"),e=this.get("colwidth")/2,d=this.get("colwidth")+this.get("hispace"),g=this.coo.get("height"),h;this.data.each(function(j,k){h=(j.value-a.start)*g/a.distance;this.doParse(j,k,k,this.x+this.get("hispace")+k*d,this.y+(g-h)-b,h);j.reference=new c.Rectangle3D(this.get("rectangle"),this);this.rectangles.push(j.reference);this.labels.push(new c.Text({id:k,text:j.name,originx:this.x+this.get("hispace")+d*k+e,originy:this.y+g+this.get("text_space")},this))},this);this.pushComponent(this.labels);this.pushComponent(this.rectangles)}});c.ColumnMulti2D=c.extend(c.Column,{configure:function(){c.ColumnMulti2D.superclass.configure.call(this);this.type="columnmulti2d";this.dataType="complex";this.columns=[]},doRectangle:function(a,b,e,d,g,h){this.doParse(a,b,e,d,g,h);a.reference=new c.Rectangle2D(this.get("rectangle"),this);this.rectangles.push(a.reference)},doConfig:function(){c.ColumnMulti2D.superclass.doConfig.call(this);var a=this.data.length,b=this.data_labels.length,e=this.get("coordinate.width"),d=this.get("coordinate.height"),a=b*a,g=this.pushIf("colwidth",e/(b+1+a));g*a>e&&(g=this.push("colwidth",e/(b+1+a)));this.push("hispace",(e-g*a)/(b+1));var h=this.coo.getScale(this.get("scaleAlign")),j=this.coo.get("brushsize"),k=this.data.length*g+this.get("hispace"),l;this.push("rectangle.width",g);this.columns.each(function(a,b){a.item.each(function(a,e){l=(a.value-h.start)*d/h.distance;this.doParse(a,e,b+"-"+e,this.x+this.get("hispace")+e*g+b*k,this.y+d-l-j,l);a.reference=new c.Rectangle2D(this.get("rectangle"),this);this.rectangles.push(a.reference)},this);this.labels.push(new c.Text({id:b,text:a.name,originx:this.x+0.5*this.get("hispace")+(b+0.5)*k,originy:this.get("originy")+d+this.get("text_space")},this))},this);this.pushComponent(this.labels);this.pushComponent(this.rectangles)}});c.Bar=c.extend(c.Chart,{configure:function(){c.Bar.superclass.configure.call(this);this.type="bar";this.dataType="simple";this.set({coordinate:{alternate_direction:"h"},barheight:void 0,text_space:6,scaleAlign:"bottom",rectangle:{}});this.registerEvent();this.rectangles=[];this.labels=[]},doParse:function(a,b,e,d,g,h){d=this.get("showpercent")?c.toPercent(a.value/this.total,this.get("decimalsnum")):a.value;this.get("tip.enable")&&this.push("rectangle.tip.text",this.fireString(this,"parseTipText",[a,a.value,b],a.name+" "+d));this.push("rectangle.value",d);this.push("rectangle.background_color",a.color);this.push("rectangle.id",e);this.push("rectangle.originy",g);this.push("rectangle.width",h)},doAnimation:function(a,b){this.coo.draw();this.labels.each(function(a){a.draw()},this);this.rectangles.each(function(c){c.push("width",Math.ceil(this.animationArithmetic(a,0,c.width,b)));c.drawRectangle()},this)},doConfig:function(){c.Bar.superclass.doConfig.call(this);c.Interface.coordinate.call(this);if("simple"==this.dataType){var a=this.data.length,b=this.get("coordinate.height"),e=this.pushIf("barheight",b/(2*a+1));e*a>b&&(e=this.push("barheight",b/(2*a+1)));this.push("barspace",(b-e*a)/(a+1))}this.is3D();this.coo=c.Interface.coordinate_.call(this);this.pushComponent(this.coo,!0);c.apply(this.get("rectangle"),c.clone("shadow,shadow_color,shadow_blur,shadow_offsetx,shadow_offsety,gradient,color_factor".split(","),this.options));this.push("rectangle.height",e);this.push("rectangle.valueAlign","right");this.push("rectangle.tipAlign","right");this.push("rectangle.originx",this.x+this.coo.get("brushsize"))}});c.Bar2D=c.extend(c.Bar,{configure:function(){c.Bar2D.superclass.configure.call(this);this.type="bar2d"},doConfig:function(){c.Bar2D.superclass.doConfig.call(this);var a=this.coo.getScale(this.get("scaleAlign")),b=this.coo.get("width"),e=this.get("barheight")/2,d=this.get("barheight")+this.get("barspace");this.data.each(function(g,h){this.doParse(g,h,h,0,this.y+this.get("barspace")+h*d,(g.value-a.start)*b/a.distance);g.reference=new c.Rectangle2D(this.get("rectangle"),this);this.rectangles.push(g.reference);this.labels.push(new c.Text({id:h,textAlign:"right",textBaseline:"middle",text:g.name,originx:this.x-this.get("text_space"),originy:this.y+this.get("barspace")+h*d+e},this))},this);this.pushComponent(this.labels);this.pushComponent(this.rectangles)}});c.BarMulti2D=c.extend(c.Bar,{configure:function(){c.BarMulti2D.superclass.configure.call(this);this.type="barmulti2d";this.dataType="complex";this.columns=[]},doConfig:function(){c.BarMulti2D.superclass.doConfig.call(this);var a=this.data.length,b=this.data_labels.length,e=this.coo.get("width"),d=this.coo.get("height"),g=b*a,h=this.pushIf("barheight",d/(b+1+g));h*a>d&&(h=this.push("barheight",d/(b+1+g)));this.push("barspace",(d-h*g)/(b+1));var j=this.coo.getScale(this.get("scaleAlign")),k=a*h+this.get("barspace");this.get("barheight");var l;this.push("rectangle.height",h);this.columns.each(function(a,b){a.item.each(function(a,d){l=(a.value-j.start)*e/j.distance;this.doParse(a,d,b+"-"+d,this.x+this.get("hispace")+d*h+b*k,this.y+this.get("barspace")+d*h+b*k,l);a.reference=new c.Rectangle2D(this.get("rectangle"),this);this.rectangles.push(a.reference)},this);this.labels.push(new c.Text({id:b,text:a.name,textAlign:"right",textBaseline:"middle",originx:this.x-this.get("text_space"),originy:this.y+0.5*this.get("barspace")+(b+0.5)*k},this))},this);this.pushComponent(this.labels);this.pushComponent(this.rectangles)}});c.LineSegment=c.extend(c.Component,{configure:function(){c.LineSegment.superclass.configure.apply(this,arguments);this.type="linesegment";this.set({intersection:!0,label:!1,point_style:"round",point_hollow:!0,smooth:!1,smoothing:1.5,point_size:3,points:[],keep_with_coordinate:!1,shadow_blur:1,shadow_offsety:1,point_space:0,coordinate:null,event_range_x:0,limit_y:!1,tip_offset:2,event_range_y:0});this.tip=this.label=null},drawSegment:function(){this.T.shadowOn(this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"));var a=this.get("points");if(this.get("area")){for(var b=[this.x,this.y],c=0;c<a.length;c++)b.push(a[c].x),b.push(a[c].y);b.push(this.x+this.get("width"));b.push(this.y);c=this.get("light_color");this.get("gradient")&&(c=this.T.avgLinearGradient(this.x,this.y-this.get("height"),this.x,this.y,[this.get("light_color2"),c]));this.T.polygon(c,!1,1,"",!1,"",0,0,0,this.get("area_opacity"),b)}this.T.lineArray(a,this.get("brushsize"),this.get("f_color"),this.get("smooth"),this.get("smoothing"));if(this.get("intersection"))for(c=0;c<a.length;c++)this.get("point_hollow")?this.T.round(a[c].x,a[c].y,this.get("point_size"),"#FEFEFE",this.get("brushsize"),this.get("f_color")):this.T.round(a[c].x,a[c].y,this.get("point_size"),this.get("f_color"));this.get("shadow")&&this.T.shadowOff()},doDraw:function(){this.drawSegment();if(this.get("intersection")&&this.get("label"))for(var a=this.get("points"),b=0;b<a.length;b++)this.T.text(a[b].value,a[b].x,a[b].y-3*this.get("point_size")/2,!1,this.get("f_color"),"center","bottom",this.get("fontStyle"))},isEventValid:function(){return{valid:!1}},tipInvoke:function(){var a=this.x,b=this.get("tip_offset"),c=this.get("point_size")+b,d=this;return function(g,h,j){var k=j.left,l=j.top,k=3>d.tipPosition&&0<j.left-g-a-b||2<d.tipPosition&&0>j.left-g-a-b?k-(g+b):k+b,l=0==d.tipPosition%2?j.top+c:j.top-h-c;return{left:k,top:l}}},doConfig:function(){c.LineSegment.superclass.doConfig.call(this);c.Assert.gtZero(this.get("point_space"),"point_space");for(var a=this,b=this.get("point_space"),e=a.get("event_range_y"),d=a.get("event_range_x"),g=a.get("tipInvokeHeap"),h=a.get("points"),j=0;j<h.length;j++)h[j].x_=h[j].x,h[j].y_=h[j].y;d=0==d?a.push("event_range_x",Math.floor(b/2)):a.push("event_range_x",c.between(1,Math.floor(b/2),d));0==e&&(e=a.push("event_range_y",Math.floor(a.get("point_size"))));a.get("tip.enable")&&(a.on("mouseover",function(){g.push(a);a.tipPosition=g.length}).on("mouseout",function(){g.pop()}),a.push("tip.invokeOffsetDynamic",!0),a.tip=new c.Tip(a.get("tip"),a));var k=a.get("coordinate"),l=a.get("limit_y"),n=a.get("keep_with_coordinate"),r=function(a,b,c){return Math.abs(b-h[a].x)<d&&(!l||l&&Math.abs(c-h[a].y)<e)?true:false},m=function(a){return{valid:true,text:h[a].text,value:h[a].value,top:h[a].y,left:h[a].x,i:a,hit:true}};a.isEventValid=function(e){if(k&&!k.isEventValid(e).valid)return{valid:false};var d=Math.floor((e.offsetX-a.x)/b);if(d<0||d>=h.length-1){d=c.between(0,h.length-1,d);return r(d,e.offsetX,e.offsetY)?m(d):{valid:n}}for(var g=d;g<=d+1;g++)if(r(g,e.offsetX,e.offsetY))return m(g);return{valid:n}}}});c.Line=c.extend(c.Chart,{configure:function(){c.Line.superclass.configure.call(this);this.type="line";this.dataType="simple";this.set({coordinate:{axis:{width:[0,0,2,2]}},crosshair:{enable:!1},scaleAlign:"left",labelAlign:"bottom",data_labels:[],label_space:6,proportional_spacing:!0,label_spacing:0,segment_style:{},legend:{sign:"round-bar",sign_size:14}});this.registerEvent("parsePoint");this.lines=[]},doConfig:function(){c.Line.superclass.doConfig.call(this);c.Interface.coordinate.call(this);var a=this,b=1==a.data.length;a.push("line_start",(a.get("coordinate.width")-a.get("coordinate.valid_width"))/2);a.push("line_end",a.get("coordinate.width")-a.get("line_start"));a.get("proportional_spacing")&&a.push("label_spacing",a.get("coordinate.valid_width")/(a.get("maxItemSize")-1));a.push("segment_style.originx",a.get("originx")+a.get("line_start"));a.push("segment_style.originy",a.get("originy")+a.get("coordinate.height"));a.push("segment_style.width",a.get("coordinate.valid_width"));a.push("segment_style.height",a.get("coordinate.valid_height"));a.push("segment_style.limit_y",!b);a.push("segment_style.keep_with_coordinate",b);a.get("crosshair.enable")&&(a.push("coordinate.crosshair",a.get("crosshair")),a.push("coordinate.crosshair.hcross",b),a.push("coordinate.crosshair.invokeOffset",function(b){b=a.lines[0].isEventValid(b);return b.valid?b:!1}));c.applyIf(a.get("segment_style"),c.clone("shadow,shadow_blur,shadow_offsetx,shadow_offsety,gradient,color_factor,tip".split(","),a.options))}});c.LineBasic2D=c.extend(c.Line,{configure:function(){c.LineBasic2D.superclass.configure.call(this);this.type="basicline2d";this.tipInvokeHeap=[]},doAnimation:function(a,b){var c,d;this.coo.draw();for(var g=0;g<this.lines.length;g++){c=this.lines[g];d=c.get("points");for(var h=0;h<d.length;h++)d[h].y=c.y-Math.ceil(this.animationArithmetic(a,0,c.y-d[h].y_,b));c.drawSegment()}},doConfig:function(){c.LineBasic2D.superclass.doConfig.call(this);this.coo=new c.Coordinate2D(c.merge({scale:[{position:this.get("scaleAlign"),max_scale:this.get("maxValue")},{position:this.get("labelAlign"),scaleEnable:!1,start_scale:1,scale:1,end_scale:this.get("maxItemSize"),labels:this.get("data_labels")}]},this.get("coordinate")),this);this.pushComponent(this.coo,!0);var a=this.coo.getScale(this.get("scaleAlign")),b=this.get("coordinate.valid_height"),e=this.get("label_spacing"),d,g,h,j=this.get("segment_style.originx"),k=this.get("segment_style.originy"),l;this.push("segment_style.tip.showType","follow");this.push("segment_style.coordinate",this.coo);this.push("segment_style.tipInvokeHeap",this.tipInvokeHeap);this.push("segment_style.point_space",e);this.data.each(function(n){d=[];n.value.each(function(r,m){g=e*m;h=(r-a.start)*b/a.distance;l={x:j+g,y:k-h,value:r,text:r};c.merge(l,this.fireEvent(this,"parsePoint",[n,g,h,m]));this.get("tip.enable")&&(l.text=this.fireString(this,"parseTipText",[n,r,m],r));d.push(l)},this);this.push("segment_style.points",d);this.push("segment_style.brushsize",n.linewidth||1);this.push("segment_style.background_color",n.color);this.lines.push(new c.LineSegment(this.get("segment_style"),this))},this);this.pushComponent(this.lines)}});(function(){var a=function(a,c){this.T=a;this.line=c;this.direction=a.get("direction");this.size=a.get("queue_size");this.space=a.get("label_spacing");this.end=a.get("line_end")};a.prototype={push:function(a){c.isArray(a)||(a=[a]);for("left"==this.direction&&a.reverse();this.size<this.line.get("points").length+a.length;)this.line.get("points").shift();for(var e=0;e<this.line.get("points").length;e++)this.line.get("points")[e].x+=this.space*a.length*("left"==this.direction?-1:1);for(e=0;e<a.length;e++)x="left"==this.direction?this.end-this.space*e:this.space*e,y=(c.between(this.T.S.start,this.T.S.end,a[e])-this.T.S.start)*this.T.S.uh,this.line.get("points").push(c.merge({x:x,y:y,value:a[e]},this.T.fireEvent(this.T,"parsePoint",[a[e],x,y,e])))}};c.LineMonitor2D=c.extend(c.Line,{configure:function(){c.LineMonitor2D.superclass.configure.call(this);this.type="linemonitor2d";this.set({direction:"left",queue_size:10});this.registerEvent();this.queues=[]},createQueue:function(b){this.init();var b=b||{},e=c.clone(this.get("segment_style"));e.brushsize=b.linewidth||1;e.background_color=b.color||"#BDBDBD";b=new c.LineSegment(e,this);this.pushComponent(b);return new a(this,b)},doConfig:function(){c.LineMonitor2D.superclass.doConfig.call(this);var a=this;a.push("animation",!1);a.get("coordinate.crosshair.enable")&&(a.push("coordinate.crosshair.hcross",1==a.data.length),a.push("coordinate.crosshair.invokeOffset",function(c){c=a.lines[0].isEventValid(c);return c.valid?c:!1}));a.coo=new c.Coordinate2D(c.merge({scale:[{position:a.get("scaleAlign"),max_scale:a.get("maxValue")},{position:a.get("labelAlign"),scaleEnable:!1,start_scale:1,scale:1,end_scale:a.get("maxItemSize"),labels:a.get("labels")}],axis:{width:[0,0,1,1]}},a.get("coordinate")),a);a.pushComponent(a.coo,!0);a.push("label_spacing",a.get("coordinate.valid_width")/(a.get("queue_size")-1));a.get("segment_style.tip")?a.push("segment_style.tip.wrap",a.get("tip.wrap")):a.push("segment_style.tip",a.get("tip"));a.push("segment_style.tip.showType","follow");a.push("segment_style.coordinate",a.coo);a.push("segment_style.keep_with_coordinate",!0);a.S=a.coo.getScale(a.get("scaleAlign"));a.S.uh=a.get("coordinate.valid_height")/a.S.distance}})})();c.Area2D=c.extend(c.LineBasic2D,{configure:function(){c.Area2D.superclass.configure.call(this);this.type="area2d";this.set({area_opacity:0.3})},doConfig:function(){this.push("segment_style.area",!0);this.push("segment_style.area_opacity",this.get("area_opacity"));c.Area2D.superclass.doConfig.call(this)}})})(iChart);
